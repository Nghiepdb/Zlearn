<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zlearn - Học Tiếng Anh Cá Nhân Hóa</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Variables */
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --danger: #e63946;
            --warning: #fca311;
            --text: #333333;
            --bg-light: #f5f7fb;
            --card-bg: #ffffff;
            --shadow: rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
            
            /* Dark Theme Variables */
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-text: #e0e0e0;
            --dark-shadow: rgba(255, 255, 255, 0.05);
        }
        
        .dark-theme {
            --bg-light: var(--dark-bg);
            --card-bg: var(--dark-card);
            --text: var(--dark-text);
            --shadow: var(--dark-shadow);
            --light: var(--dark-card);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Inter', sans-serif;
        }
        
        body {
            background-color: var(--bg-light);
            color: var(--text);
            line-height: 1.6;
            transition: var(--transition);
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        header {
            background: var(--card-bg);
            color: var(--text);
            padding: 15px 0;
            box-shadow: 0 4px 12px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: var(--transition);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .logo i {
            margin-right: 10px;
            font-size: 2rem;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 25px;
            position: relative;
        }
        
        nav ul li a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 8px 0;
            display: block;
        }
        
        nav ul li a:hover {
            color: var(--primary);
        }
        
        nav ul li a.active {
            color: var(--primary);
        }
        
        nav ul li a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
            border-radius: 3px;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .theme-toggle {
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .theme-toggle:hover {
            color: var(--primary);
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
        }
        
        .auth-buttons button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .auth-buttons button:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(67, 97, 238, 0.3);
        }
        
        .hamburger {
            display: none;
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Mobile Menu */
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 280px;
            height: 100vh;
            background: var(--card-bg);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            transition: var(--transition);
            padding: 80px 20px 20px;
            display: flex;
            flex-direction: column;
        }
        
        .mobile-menu.active {
            right: 0;
        }
        
        .mobile-menu nav ul {
            flex-direction: column;
            gap: 15px;
        }
        
        .mobile-menu nav ul li {
            margin: 0;
        }
        
        .mobile-menu nav ul li a {
            padding: 10px 15px;
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .mobile-menu nav ul li a:hover {
            background: rgba(67, 97, 238, 0.1);
        }
        
        .mobile-menu .auth-buttons {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .mobile-menu .auth-buttons button {
            margin: 0;
            justify-content: center;
        }
        
        .close-menu {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
        }
        
        .overlay.active {
            display: block;
        }
        
        /* Main Content */
        .page {
            display: none;
            min-height: 80vh;
            padding: 30px 0;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .page.active {
            display: block;
        }
        
        /* Hero Section */
        .hero {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 40px;
            padding: 60px 0;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px var(--shadow);
            margin-bottom: 40px;
            overflow: hidden;
            position: relative;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(67, 97, 238, 0.1) 0%, rgba(67, 97, 238, 0) 70%);
            border-radius: 50%;
        }
        
        .hero-content {
            flex: 1;
            padding: 0 40px;
            z-index: 1;
        }
        
        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            color: var(--primary);
            line-height: 1.2;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: var(--text);
            max-width: 600px;
        }
        
        .hero-image {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 20px;
        }
        
        .hero-video {
            width: 100%;
            max-width: 400px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--primary);
            color: white;
            padding: 14px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }
        
        .btn:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.4);
        }
        
        .btn-pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(67, 97, 238, 0); }
            100% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0); }
        }
        
        .btn-success {
            background: var(--success);
            box-shadow: 0 4px 15px rgba(76, 201, 240, 0.3);
        }
        
        .btn-success:hover {
            background: #3aa8d0;
            box-shadow: 0 8px 20px rgba(76, 201, 240, 0.4);
        }
        
        /* Features Section */
        .features {
            margin: 60px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            color: var(--primary);
            font-size: 2.2rem;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .feature-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px var(--shadow);
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--success));
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px var(--shadow);
        }
        
        .feature-icon {
            width: 70px;
            height: 70px;
            background: rgba(67, 97, 238, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 1.8rem;
            color: var(--primary);
        }
        
        .feature-card h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        /* Survey */
        .survey-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px var(--shadow);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .survey-progress {
            height: 8px;
            background: #eee;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .survey-progress-bar {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .question {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .question h3 {
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .options label {
            display: block;
            margin-bottom: 12px;
            padding: 12px 18px;
            border: 1px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            background: var(--light);
        }
        
        .options label:hover {
            background: rgba(67, 97, 238, 0.05);
            border-color: var(--primary);
        }
        
        .options input[type="radio"] {
            margin-right: 12px;
        }
        
        .survey-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        /* Dashboard */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .dashboard-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px var(--shadow);
            transition: var(--transition);
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px var(--shadow);
        }
        
        .dashboard-card h3 {
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            padding-bottom: 10px;
        }
        
        .progress-container {
            margin-bottom: 20px;
        }
        
        .progress-bar {
            height: 12px;
            background: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 8px;
            position: relative;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--success));
            border-radius: 10px;
            width: 0%;
            transition: width 1.5s ease-in-out;
        }
        
        .level-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            background: var(--primary);
            color: white;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .course-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px var(--shadow);
            transition: var(--transition);
        }
        
        .course-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px var(--shadow);
        }
        
        .course-thumbnail {
            height: 160px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }
        
        .course-content {
            padding: 20px;
        }
        
        .course-content h4 {
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .course-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Course Page */
        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .course-sidebar {
            width: 300px;
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px var(--shadow);
            margin-right: 30px;
        }
        
        .course-main {
            flex: 1;
        }
        
        .course-layout {
            display: flex;
        }
        
        .lesson-list {
            list-style: none;
            margin-top: 20px;
        }
        
        .lesson-item {
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .lesson-item:hover {
            background: rgba(67, 97, 238, 0.05);
        }
        
        .lesson-item.active {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            font-weight: 500;
        }
        
        .lesson-item i {
            font-size: 0.9rem;
        }
        
        .course-tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid #ddd;
            overflow-x: auto;
        }
        
        .tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            white-space: nowrap;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            margin-bottom: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--shadow);
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .vocabulary-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .vocab-item {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 10px var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            height: 180px;
        }
        
        .vocab-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px var(--shadow);
        }
        
        .vocab-item.flipped .vocab-front {
            transform: rotateY(180deg);
        }
        
        .vocab-item.flipped .vocab-back {
            transform: rotateY(0);
        }
        
        .vocab-front, .vocab-back {
            transition: transform 0.6s;
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .vocab-back {
            transform: rotateY(180deg);
        }
        
        .vocab-word {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 1.2rem;
        }
        
        .vocab-meaning {
            color: var(--text);
            margin-bottom: 8px;
        }
        
        .vocab-example {
            font-style: italic;
            color: #777;
            font-size: 0.9rem;
        }
        
        .vocab-pronunciation {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .pronounce-btn {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .speaking-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px var(--shadow);
            text-align: center;
        }
        
        .speaking-visualizer {
            width: 100%;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }
        
        .wave {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
        }
        
        .wave-bar {
            width: 4px;
            height: 20px;
            background: var(--primary);
            border-radius: 3px;
            animation: wave 1.2s infinite ease-in-out;
        }
        
        .wave-bar:nth-child(2) { animation-delay: 0.1s; }
        .wave-bar:nth-child(3) { animation-delay: 0.2s; }
        .wave-bar:nth-child(4) { animation-delay: 0.3s; }
        .wave-bar:nth-child(5) { animation-delay: 0.4s; }
        .wave-bar:nth-child(6) { animation-delay: 0.5s; }
        .wave-bar:nth-child(7) { animation-delay: 0.6s; }
        
        @keyframes wave {
            0%, 100% { height: 20px; }
            50% { height: 60px; }
        }
        
        .chat-container {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px var(--shadow);
        }
        
        .chat-header {
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chat-avatar {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-weight: bold;
        }
        
        .chat-messages {
            height: 350px;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            animation: messageAppear 0.3s ease;
        }
        
        @keyframes messageAppear {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            background: var(--primary);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }
        
        .ai-message {
            background: #f0f5ff;
            color: var(--dark);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }
        
        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
            transition: var(--transition);
        }
        
        .chat-input input:focus {
            border-color: var(--primary);
        }
        
        .chat-input button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            margin-left: 10px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .chat-input button:hover {
            background: var(--primary-light);
        }
        
        .test-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px var(--shadow);
        }
        
        .test-question {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        /* Grammar Section */
        .grammar-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px var(--shadow);
            margin-bottom: 25px;
        }
        
        .grammar-point {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .grammar-point h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .grammar-example {
            background: rgba(67, 97, 238, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .grammar-example p {
            margin-bottom: 8px;
        }
        
        .grammar-note {
            background: rgba(255, 193, 7, 0.1);
            border-left: 4px solid var(--warning);
            padding: 12px 15px;
            margin-top: 15px;
            border-radius: 4px;
        }
        
        /* Certificate */
        .certificate-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .certificate {
            background: white;
            border: 20px solid #f0f0f0;
            padding: 50px;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            position: relative;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(67, 97, 238, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(76, 201, 240, 0.05) 0%, transparent 20%);
        }
        
        .certificate::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            border: 2px solid var(--primary);
            pointer-events: none;
        }
        
        .certificate-logo {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .certificate h1 {
            color: var(--primary);
            margin-bottom: 30px;
            font-size: 2.5rem;
            position: relative;
            display: inline-block;
        }
        
        .certificate h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 25%;
            width: 50%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }
        
        .certificate h2 {
            margin: 25px 0;
            color: var(--primary);
            font-size: 2rem;
        }
        
        .certificate p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .certificate-code {
            font-family: monospace;
            background: #f5f5f5;
            padding: 12px;
            border-radius: 8px;
            display: inline-block;
            margin: 25px 0;
            font-size: 1.1rem;
        }
        
        .certificate-signature {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
            padding: 0 50px;
        }
        
        .signature-line {
            width: 200px;
            height: 1px;
            background: #333;
            margin: 0 auto 10px;
        }
        
        .no-certificate {
            text-align: center;
            padding: 60px 20px;
        }
        
        .no-certificate i {
            font-size: 5rem;
            color: #ddd;
            margin-bottom: 20px;
        }
        
        /* Admin */
        .admin-tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid #ddd;
            overflow-x: auto;
        }
        
        .admin-tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            white-space: nowrap;
        }
        
        .admin-tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .admin-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .admin-content.active {
            display: block;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 25px;
            box-shadow: 0 3px 10px var(--shadow);
            border-radius: 10px;
            overflow: hidden;
        }
        
        table th, table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        table th {
            background: var(--primary);
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        table tr:nth-child(even) {
            background: rgba(0, 0, 0, 0.02);
        }
        
        table tr:hover {
            background: rgba(67, 97, 238, 0.05);
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .btn-edit, .btn-delete {
            padding: 6px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .btn-edit {
            background: var(--success);
            color: white;
        }
        
        .btn-delete {
            background: var(--danger);
            color: white;
        }
        
        .btn-edit:hover, .btn-delete:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalAppear 0.3s ease;
        }
        
        @keyframes modalAppear {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--card-bg);
            color: var(--text);
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1200;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
        }
        
        .toast.active {
            transform: translateY(0);
            opacity: 1;
        }
        
        .toast.success {
            border-left: 4px solid var(--success);
        }
        
        .toast.error {
            border-left: 4px solid var(--danger);
        }
        
        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 50px 0 20px;
            margin-top: 70px;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
        }
        
        .footer-section {
            flex: 1;
            min-width: 250px;
        }
        
        .footer-section h3 {
            margin-bottom: 20px;
            color: var(--success);
        }
        
        .footer-section p {
            margin-bottom: 15px;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: var(--transition);
        }
        
        .footer-links a:hover {
            color: var(--success);
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #444;
            margin-top: 40px;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .hero {
                flex-direction: column;
                text-align: center;
            }
            
            .hero-content {
                padding: 0 20px;
            }
            
            .hero h1 {
                font-size: 2.3rem;
            }
            
            .course-layout {
                flex-direction: column;
            }
            
            .course-sidebar {
                width: 100%;
                margin-right: 0;
                margin-bottom: 30px;
            }
        }
        
        @media (max-width: 768px) {
            nav ul {
                display: none;
            }
            
            .hamburger {
                display: block;
            }
            
            .header-actions {
                gap: 10px;
            }
            
            .auth-buttons button span {
                display: none;
            }
            
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .course-tabs, .admin-tabs {
                flex-wrap: wrap;
            }
            
            .tab, .admin-tab {
                flex: 1;
                min-width: 120px;
                justify-content: center;
            }
            
            .certificate {
                padding: 30px 20px;
                border-width: 10px;
            }
            
            .certificate-signature {
                flex-direction: column;
                gap: 30px;
                padding: 0;
            }
        }
        
        @media (max-width: 576px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .courses-grid {
                grid-template-columns: 1fr;
            }
            
            .vocabulary-list {
                grid-template-columns: 1fr;
            }
            
            .message {
                max-width: 90%;
            }
            
            .auth-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .auth-buttons button {
                padding: 6px 12px;
                font-size: 0.9rem;
            }
        }

        /* NEW: Profile Page Styles */
        .profile-container {
            display: flex;
            gap: 30px;
        }
        
        .profile-sidebar {
            width: 300px;
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px var(--shadow);
            text-align: center;
        }
        
        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--success));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 2.5rem;
        }
        
        .profile-main {
            flex: 1;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px var(--shadow);
            text-align: center;
            transition: var(--transition);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
        
        /* NEW: Achievement Badges */
        .achievements-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px var(--shadow);
            margin-top: 30px;
        }
        
        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .badge {
            text-align: center;
            padding: 15px 10px;
            border-radius: 10px;
            background: rgba(67, 97, 238, 0.05);
            transition: var(--transition);
        }
        
        .badge i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .badge.earned i {
            color: var(--success);
        }
        
        .badge.earned {
            background: rgba(76, 201, 240, 0.1);
            transform: scale(1.05);
        }
        
        /* NEW: Enhanced Dictionary Styles */
        .dictionary-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .dictionary-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .search-container {
            position: relative;
            margin-bottom: 30px;
        }
        
        .search-box {
            display: flex;
            align-items: center;
            background: var(--card-bg);
            border-radius: 50px;
            padding: 5px;
            box-shadow: 0 5px 20px var(--shadow);
            border: 2px solid transparent;
            transition: var(--transition);
        }
        
        .search-box:focus-within {
            border-color: var(--primary);
            box-shadow: 0 5px 25px rgba(67, 97, 238, 0.2);
        }
        
        .search-icon {
            padding: 0 15px;
            color: var(--primary);
            font-size: 1.1rem;
        }
        
        .search-box input {
            flex: 1;
            border: none;
            padding: 15px 10px;
            background: transparent;
            font-size: 1.1rem;
            color: var(--text);
            outline: none;
        }
        
        .search-btn {
            border-radius: 50px;
            padding: 12px 25px;
            white-space: nowrap;
        }
        
        .dictionary-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .word-lists-sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .word-category {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px var(--shadow);
        }
        
        .word-category h3 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }
        
        .word-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .word-list-item {
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .word-list-item:hover {
            background: rgba(67, 97, 238, 0.05);
            transform: translateX(5px);
        }
        
        .word-list-item .word {
            font-weight: 500;
            color: var(--text);
        }
        
        .word-list-item .meaning {
            font-size: 0.9rem;
            color: #666;
        }
        
        .word-detail-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px var(--shadow);
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .word-detail-placeholder {
            text-align: center;
            color: #666;
        }
        
        .word-detail-content {
            width: 100%;
            animation: fadeInUp 0.6s ease;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .word-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(67, 97, 238, 0.1);
        }
        
        .word-title h1 {
            margin-bottom: 10px;
        }
        
        .word-meta {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .phonetic {
            color: var(--success);
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .pronounce-btn-large {
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .pronounce-btn-large:hover {
            background: var(--primary-light);
            transform: scale(1.1);
        }
        
        .word-type-badge {
            background: linear-gradient(135deg, var(--primary), var(--success));
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .meaning-section, .example-section, .related-section {
            margin-bottom: 25px;
        }
        
        .meaning-section h3, .example-section h3, .related-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
        }
        
        .meaning-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text);
            padding: 15px;
            background: rgba(67, 97, 238, 0.05);
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .example-box {
            background: rgba(76, 201, 240, 0.05);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--success);
        }
        
        .example-text {
            font-style: italic;
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text);
            margin: 0;
        }
        
        .related-words {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .related-word {
            background: var(--light);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            border: 1px solid #ddd;
        }
        
        .related-word:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }
        
        .word-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        .quick-categories {
            margin-top: 40px;
        }
        
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .category-item {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 5px 15px var(--shadow);
            border: 2px solid transparent;
        }
        
        .category-item:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 25px var(--shadow);
        }
        
        .category-item i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
            display: block;
        }
        
        .category-item span {
            font-weight: 600;
            color: var(--text);
        }
        
        /* NEW: Enhanced Vocabulary Centering */
        .vocab-back {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .vocab-meaning, .vocab-example {
            margin: 0;
            width: 100%;
        }
        
        /* NEW: Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* NEW: Login Required Message */
        .login-required {
            text-align: center;
            padding: 60px 20px;
        }
        
        .login-required i {
            font-size: 5rem;
            color: #ddd;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Modal Title</h3>
                <button class="close-modal" id="close-modal">&times;</button>
            </div>
            <div id="modal-body">
                Modal content goes here.
            </div>
        </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobile-menu">
        <button class="close-menu" id="close-menu">
            <i class="fas fa-times"></i>
        </button>
        <nav>
            <ul>
                <li><a href="#" class="nav-link active" onclick="showPage('home')">Trang chủ</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('dashboard')">Học tập</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('profile')">Hồ sơ</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('certificate')">Chứng chỉ</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('dictionary')">Từ điển</a></li>
                <li><a href="#" class="nav-link" onclick="showPage('admin-login')">Quản trị</a></li>
            </ul>
        </nav>
        <div class="auth-buttons">
            <button id="mobile-login-btn" onclick="showPage('login')">
                <i class="fas fa-sign-in-alt"></i>
                <span>Đăng nhập</span>
            </button>
            <button id="mobile-register-btn" onclick="showPage('register')">
                <i class="fas fa-user-plus"></i>
                <span>Đăng ký</span>
            </button>
            <button id="mobile-logout-btn" style="display:none;" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Đăng xuất</span>
            </button>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <span>Zlearn</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" onclick="showPage('home')">Trang chủ</a></li>
                    <li><a href="#" class="nav-link" onclick="showPage('dashboard')">Học tập</a></li>
                    <li><a href="#" class="nav-link" onclick="showPage('profile')">Hồ sơ</a></li>
                    <li><a href="#" class="nav-link" onclick="showPage('certificate')">Chứng chỉ</a></li>
                    <li><a href="#" class="nav-link" onclick="showPage('dictionary')">Từ điển</a></li>
                    <li><a href="#" class="nav-link" onclick="showPage('admin-login')">Quản trị</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="auth-buttons">
                    <button id="login-btn" onclick="showPage('login')">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Đăng nhập</span>
                    </button>
                    <button id="register-btn" onclick="showPage('register')">
                        <i class="fas fa-user-plus"></i>
                        <span>Đăng ký</span>
                    </button>
                    <button id="logout-btn" style="display:none;" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Đăng xuất</span>
                    </button>
                </div>
                <button class="hamburger" id="hamburger">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Home Page -->
        <div id="home" class="page active">
            <div class="hero">
                <div class="hero-content">
                    <h1>Zlearn - Học Tiếng Anh Cá Nhân Hóa</h1>
                    <p>Khám phá phương pháp học tiếng Anh thông minh với AI và video YouTube. Xác định trình độ, học theo lộ trình phù hợp và nhận chứng chỉ sau khi hoàn thành.</p>
                    <button class="btn btn-pulse" onclick="startLearning()">
                        <i class="fas fa-play"></i>
                        Bắt đầu học ngay
                    </button>
                </div>
                <div class="hero-image">
                    <div class="hero-video">
                        <iframe width="100%" height="225" src="https://www.youtube.com/embed/7Z0_NKp-COQ" title="YouTube Short về học tiếng Anh" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
            
            <div class="features">
                <h2 class="section-title">Tính năng nổi bật</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3>Đánh giá trình độ</h3>
                        <p>Làm bài khảo sát để xác định cấp độ tiếng Anh hiện tại của bạn.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-route"></i>
                        </div>
                        <h3>Lộ trình cá nhân hóa</h3>
                        <p>Học theo lộ trình được thiết kế riêng cho trình độ của bạn.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <h3>Học qua video YouTube</h3>
                        <p>Học với video thực tế được chọn lọc phù hợp với cấp độ.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3>Tương tác với AI</h3>
                        <p>Luyện nói và chat với AI Gemini để cải thiện kỹ năng giao tiếp.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-certificate"></i>
                        </div>
                        <h3>Chứng chỉ trực tuyến</h3>
                        <p>Nhận chứng chỉ sau khi hoàn thành cấp độ Thành thạo.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h3>Theo dõi tiến độ</h3>
                        <p>Theo dõi sự tiến bộ của bạn qua từng cấp độ học.</p>
                    </div>
                </div>
            </div>

            <!-- Testimonials Section -->
            <div class="features">
                <h2 class="section-title">Cảm nhận học viên</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h3>Nguyễn Thị Hương</h3>
                        <p>"Zlearn đã giúp tôi tự tin giao tiếp tiếng Anh chỉ sau 3 tháng. Phương pháp học qua video và AI thực sự hiệu quả!"</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3>Trần Văn Nam</h3>
                        <p>"Lộ trình cá nhân hóa phù hợp với trình độ của tôi. Tôi không còn cảm thấy chán nản khi học tiếng Anh nữa."</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h3>Lê Minh Anh</h3>
                        <p>"Tính năng luyện nói với AI giúp tôi cải thiện phát âm đáng kể. Giờ tôi có thể nói chuyện với đồng nghiệp nước ngoài tự tin hơn."</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Survey Page -->
        <div id="survey" class="page">
            <div class="survey-container">
                <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Khảo sát trình độ tiếng Anh</h2>
                <p style="text-align: center; margin-bottom: 30px;">Hãy trả lời các câu hỏi dưới đây để chúng tôi xác định cấp độ phù hợp nhất với bạn.</p>
                
                <div class="survey-progress">
                    <div class="survey-progress-bar" id="survey-progress-bar"></div>
                </div>
                
                <div id="survey-questions">
                    <!-- Questions will be generated by JavaScript -->
                </div>
                
                <div class="survey-nav">
                    <button class="btn" id="prev-question" style="display: none;" onclick="prevQuestion()">
                        <i class="fas fa-arrow-left"></i>
                        Câu trước
                    </button>
                    <button class="btn" id="next-question" onclick="nextQuestion()">
                        Câu tiếp theo
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="login" class="page">
            <div class="survey-container">
                <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Đăng nhập</h2>
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" placeholder="Nhập email của bạn">
                </div>
                <div class="form-group">
                    <label for="login-password">Mật khẩu</label>
                    <input type="password" id="login-password" placeholder="Nhập mật khẩu">
                </div>
                <button class="btn" style="width: 100%;" onclick="login()">Đăng nhập</button>
                <p style="text-align: center; margin-top: 15px;">
                    Chưa có tài khoản? <a href="#" onclick="showPage('register')" style="color: var(--primary);">Đăng ký ngay</a>
                </p>
            </div>
        </div>

        <!-- Register Page -->
        <div id="register" class="page">
            <div class="survey-container">
                <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Đăng ký tài khoản</h2>
                <div class="form-group">
                    <label for="register-name">Họ và tên</label>
                    <input type="text" id="register-name" placeholder="Nhập họ và tên">
                </div>
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" placeholder="Nhập email của bạn">
                </div>
                <div class="form-group">
                    <label for="register-password">Mật khẩu</label>
                    <input type="password" id="register-password" placeholder="Nhập mật khẩu">
                </div>
                <div class="form-group">
                    <label for="register-confirm">Xác nhận mật khẩu</label>
                    <input type="password" id="register-confirm" placeholder="Nhập lại mật khẩu">
                </div>
                <button class="btn" style="width: 100%;" onclick="register()">Đăng ký</button>
                <p style="text-align: center; margin-top: 15px;">
                    Đã có tài khoản? <a href="#" onclick="showPage('login')" style="color: var(--primary);">Đăng nhập ngay</a>
                </p>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard" class="page">
            <div class="dashboard-header">
                <h2 style="color: var(--primary);">Bảng điều khiển học tập</h2>
                <div class="quote" id="daily-quote" style="font-style: italic; color: #666;"></div>
            </div>
            
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3><i class="fas fa-chart-line"></i> Tiến độ học tập</h3>
                    <div class="progress-container">
                        <p>Cấp độ hiện tại: <span id="current-level">Chưa xác định</span></p>
                        <div class="progress-bar">
                            <div class="progress" id="level-progress" style="width: 0%;"></div>
                        </div>
                        <p id="progress-text">0% hoàn thành</p>
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-trophy"></i> Các cấp độ</h3>
                    <div>
                        <span class="level-badge"><i class="fas fa-star"></i> Cơ bản</span>
                        <span class="level-badge"><i class="fas fa-star"></i> Sơ cấp</span>
                        <span class="level-badge"><i class="fas fa-star"></i> Trung cấp</span>
                        <span class="level-badge"><i class="fas fa-star"></i> Cao cấp</span>
                        <span class="level-badge"><i class="fas fa-crown"></i> Thành thạo</span>
                    </div>
                    <p style="margin-top: 15px;">Bạn đang ở cấp độ: <strong id="user-level">Chưa xác định</strong></p>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-chart-pie"></i> Thống kê học tập</h3>
                    <p>Số khóa học đã hoàn thành: <strong id="completed-courses">0</strong></p>
                    <p>Số bài kiểm tra đã làm: <strong id="completed-tests">0</strong></p>
                    <p>Điểm trung bình: <strong id="average-score">0</strong></p>
                </div>
            </div>
            
            <h3 style="margin: 30px 0 15px; color: var(--primary);">Tất cả khóa học</h3>
            <div class="courses-grid" id="user-courses">
                <!-- Courses will be generated by JavaScript -->
            </div>
        </div>

        <!-- NEW: Profile Page -->
        <div id="profile" class="page">
            <h2 style="margin-bottom: 20px; color: var(--primary);">Hồ sơ cá nhân</h2>
            
            <!-- Login Required Message -->
            <div id="profile-login-required" class="login-required" style="display: none;">
                <i class="fas fa-user-lock"></i>
                <h3 style="color: var(--danger); margin-bottom: 15px;">Vui lòng đăng nhập</h3>
                <p>Bạn cần đăng nhập để xem thông tin hồ sơ cá nhân.</p>
                <button class="btn" onclick="showPage('login')" style="margin-top: 20px;">
                    <i class="fas fa-sign-in-alt"></i> Đăng nhập ngay
                </button>
            </div>
            
            <!-- Profile Content (only shown when logged in) -->
            <div id="profile-content" style="display: none;">
                <div class="profile-container">
                    <div class="profile-sidebar">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3 id="profile-name">Người dùng Zlearn</h3>
                        <p id="profile-email">user@example.com</p>
                        <div style="margin-top: 20px;">
                            <span class="level-badge" id="profile-level">Cơ bản</span>
                        </div>
                        <button class="btn" style="width: 100%; margin-top: 20px;" onclick="showPage('dashboard')">
                            <i class="fas fa-edit"></i> Chỉnh sửa hồ sơ
                        </button>
                    </div>
                    
                    <div class="profile-main">
                        <div class="profile-stats">
                            <div class="stat-card">
                                <div class="stat-number" id="stat-courses">0</div>
                                <div class="stat-label">Khóa học đã học</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="stat-hours">0</div>
                                <div class="stat-label">Giờ học</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="stat-words">0</div>
                                <div class="stat-label">Từ vựng đã học</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="stat-streak">0</div>
                                <div class="stat-label">Ngày học liên tiếp</div>
                            </div>
                        </div>
                        
                        <div class="achievements-container">
                            <h3><i class="fas fa-trophy"></i> Thành tích</h3>
                            <div class="badges-grid">
                                <div class="badge earned">
                                    <i class="fas fa-graduation-cap"></i>
                                    <div>Học viên mới</div>
                                </div>
                                <div class="badge">
                                    <i class="fas fa-fire"></i>
                                    <div>Tuần học chăm chỉ</div>
                                </div>
                                <div class="badge">
                                    <i class="fas fa-book"></i>
                                    <div>100 từ vựng</div>
                                </div>
                                <div class="badge">
                                    <i class="fas fa-star"></i>
                                    <div>Khóa học đầu tiên</div>
                                </div>
                                <div class="badge">
                                    <i class="fas fa-crown"></i>
                                    <div>Trình độ thành thạo</div>
                                </div>
                                <div class="badge">
                                    <i class="fas fa-award"></i>
                                    <div>Hoàn thành 10 bài kiểm tra</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Course Page -->
        <div id="course" class="page">
            <div class="course-header">
                <h2 id="course-title" style="color: var(--primary);">Tiêu đề khóa học</h2>
                <button class="btn" onclick="showPage('dashboard')">
                    <i class="fas fa-arrow-left"></i> Quay lại
                </button>
            </div>
            
            <div class="course-layout">
                <div class="course-sidebar">
                    <h3>Danh sách bài học</h3>
                    <ul class="lesson-list" id="lesson-list">
                        <!-- Lessons will be generated by JavaScript -->
                    </ul>
                </div>
                
                <div class="course-main">
                    <div class="course-tabs">
                        <div class="tab active" onclick="changeTab('video')">
                            <i class="fas fa-play-circle"></i>
                            Video bài học
                        </div>
                        <div class="tab" onclick="changeTab('vocabulary')">
                            <i class="fas fa-book"></i>
                            Từ vựng
                        </div>
                        <div class="tab" onclick="changeTab('grammar')">
                            <i class="fas fa-language"></i>
                            Ngữ pháp
                        </div>
                        <div class="tab" onclick="changeTab('speaking')">
                            <i class="fas fa-microphone"></i>
                            Luyện nói
                        </div>
                        <div class="tab" onclick="changeTab('chat')">
                            <i class="fas fa-comments"></i>
                            Chat với AI
                        </div>
                        <div class="tab" onclick="changeTab('test')">
                            <i class="fas fa-tasks"></i>
                            Bài kiểm tra
                        </div>
                    </div>
                    
                    <div id="video-tab" class="tab-content active">
                        <div class="video-container">
                            <iframe id="course-video" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                        <div style="margin-top: 20px;">
                            <h3 id="video-title">Tiêu đề video</h3>
                            <p id="video-description">Mô tả video sẽ hiển thị ở đây.</p>
                        </div>
                    </div>
                    
                    <div id="vocabulary-tab" class="tab-content">
                        <h3>Từ vựng trong bài</h3>
                        <div class="vocabulary-list" id="vocab-list">
                            <!-- Vocabulary items will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div id="grammar-tab" class="tab-content">
                        <h3>Ngữ pháp bài học</h3>
                        <div class="grammar-container" id="grammar-content">
                            <!-- Grammar content will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div id="speaking-tab" class="tab-content">
                        <h3>Luyện nói với AI</h3>
                        <div class="speaking-container">
                            <p>Hãy nhấn nút bên dưới và nói từ/câu được hiển thị. AI sẽ đánh giá phát âm của bạn.</p>
                            <div style="text-align: center; margin: 20px 0;">
                                <div id="speaking-word" style="font-size: 1.5rem; font-weight: bold; margin-bottom: 20px; color: var(--primary);">Từ cần phát âm</div>
                                <button class="btn" onclick="startSpeechRecognition()">Bắt đầu nói</button>
                            </div>
                            <div class="speaking-visualizer" id="speaking-visualizer" style="display: none;">
                                <div class="wave">
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                    <div class="wave-bar"></div>
                                </div>
                            </div>
                            <div id="speaking-result" style="margin-top: 20px;"></div>
                        </div>
                    </div>
                    
                    <div id="chat-tab" class="tab-content">
                        <h3>Chat với AI về chủ đề bài học</h3>
                        <div class="chat-container">
                            <div class="chat-header">
                                <div class="chat-avatar">AI</div>
                                <div>
                                    <h4 style="margin: 0;">Trợ lý Zlearn</h4>
                                    <p style="margin: 0; font-size: 0.8rem;">Đang trực tuyến</p>
                                </div>
                            </div>
                            <div class="chat-messages" id="chat-messages">
                                <div class="message ai-message">
                                    Xin chào! Tôi là trợ lý AI của Zlearn. Hãy trò chuyện với tôi về chủ đề bài học này nhé!
                                </div>
                            </div>
                            <div class="chat-input">
                                <input type="text" id="chat-input" placeholder="Nhập câu hỏi của bạn..." onkeypress="handleChatInputKeypress(event)">
                                <button onclick="sendMessage()">Gửi</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="test-tab" class="tab-content">
                        <h3>Bài kiểm tra cuối khóa</h3>
                        <div class="test-container" id="test-questions">
                            <!-- Test questions will be generated by JavaScript -->
                        </div>
                        <button class="btn" style="width: 100%; margin-top: 20px;" onclick="submitTest()">Nộp bài</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Certificate Page -->
        <div id="certificate" class="page">
            <div class="certificate-container">
                <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Chứng chỉ của bạn</h2>
                
                <div class="certificate" id="certificate-content">
                    <div class="certificate-logo">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h1>CHỨNG CHỈ TIẾNG ANH</h1>
                    <p>Zlearn xác nhận</p>
                    <h2 id="certificate-name" style="margin: 20px 0; color: var(--primary);">HỌ VÀ TÊN HỌC VIÊN</h2>
                    <p>đã hoàn thành xuất sắc khóa học</p>
                    <h3 style="margin: 15px 0; color: var(--secondary);">TIẾNG ANH THÀNH THẠO</h3>
                    <p>vào ngày <span id="certificate-date">DD/MM/YYYY</span></p>
                    <div class="certificate-code">
                        Mã chứng chỉ: <span id="certificate-code">ZL-XXXX-XXXX</span>
                    </div>
                    <div class="certificate-signature">
                        <div>
                            <div class="signature-line"></div>
                            <p>Giám đốc Zlearn</p>
                        </div>
                        <div>
                            <div class="signature-line"></div>
                            <p>Giảng viên</p>
                        </div>
                    </div>
                    <p style="margin-top: 30px;">Zlearn Certification</p>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="downloadCertificate()">
                        <i class="fas fa-download"></i>
                        Tải về PDF
                    </button>
                </div>
                
                <div id="no-certificate" style="text-align: center; padding: 60px 20px; display: none;">
                    <i class="fas fa-award" style="font-size: 5rem; color: #ddd; margin-bottom: 20px;"></i>
                    <h3 style="color: var(--danger); margin-bottom: 15px;">Bạn chưa có chứng chỉ nào</h3>
                    <p>Hãy hoàn thành cấp độ Thành thạo để nhận chứng chỉ từ Zlearn!</p>
                    <button class="btn" onclick="showPage('dashboard')">Bắt đầu học ngay</button>
                </div>
            </div>
        </div>

        <!-- Dictionary Page -->
        <div id="dictionary" class="page">
            <div class="dictionary-container">
                <div class="dictionary-header">
                    <h2 style="text-align:center; color:var(--primary); margin-bottom:10px;">Từ Điển Anh - Việt Zlearn</h2>
                    <p style="text-align:center; margin-bottom:30px; color:var(--text);">Tra cứu từ vựng tiếng Anh với phiên âm, nghĩa tiếng Việt và ví dụ minh họa</p>
                </div>
                
                <!-- Search Section -->
                <div class="search-container">
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input id="dictionary-search" type="text" placeholder="Nhập từ tiếng Anh cần tra cứu..." autocomplete="off" onkeypress="handleDictionarySearchKeypress(event)">
                        <button class="btn search-btn" onclick="searchWord()">
                            <i class="fas fa-search"></i>
                            Tìm kiếm
                        </button>
                    </div>
                </div>

                <!-- Dictionary Layout -->
                <div class="dictionary-layout">
                    <!-- Left Sidebar - Word Lists -->
                    <div class="word-lists-sidebar">
                        <!-- Featured Words -->
                        <div class="word-category">
                            <h3><i class="fas fa-star"></i> Từ nổi bật</h3>
                            <div class="word-list" id="featured-words">
                                <!-- Featured words will be populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Common Words -->
                        <div class="word-category">
                            <h3><i class="fas fa-fire"></i> Từ thông dụng</h3>
                            <div class="word-list" id="common-words">
                                <!-- Common words will be populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Recent Searches -->
                        <div class="word-category">
                            <h3><i class="fas fa-history"></i> Tìm kiếm gần đây</h3>
                            <div class="word-list" id="recent-words">
                                <!-- Recent searches will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Main Content - Word Detail -->
                    <div class="word-detail-main">
                        <div class="word-detail-card" id="word-detail-card">
                            <div class="word-detail-placeholder" id="word-detail-placeholder">
                                <i class="fas fa-book-open" style="font-size:4rem; color:#ddd; margin-bottom:20px;"></i>
                                <h3 style="color:#666;">Chào mừng đến với Từ điển Zlearn</h3>
                                <p style="color:#888;">Nhập từ cần tra cứu hoặc chọn một từ trong danh sách để xem chi tiết</p>
                            </div>
                            
                            <div class="word-detail-content" id="word-detail-content" style="display:none;">
                                <!-- Word Header -->
                                <div class="word-header">
                                    <div class="word-title">
                                        <h1 id="detail-word" style="color:var(--primary); margin:0; font-size:2.2rem;"></h1>
                                        <div class="word-meta">
                                            <span id="detail-phonetic" class="phonetic"></span>
                                            <button class="pronounce-btn-large" onclick="pronounceWord(currentDetailWord)">
                                                <i class="fas fa-volume-up"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="word-type-badge" id="detail-type"></div>
                                </div>

                                <!-- Word Meaning -->
                                <div class="meaning-section">
                                    <h3><i class="fas fa-language"></i> Nghĩa tiếng Việt</h3>
                                    <p id="detail-meaning" class="meaning-text"></p>
                                </div>

                                <!-- Example -->
                                <div class="example-section">
                                    <h3><i class="fas fa-comment"></i> Ví dụ</h3>
                                    <div class="example-box">
                                        <p id="detail-example" class="example-text"></p>
                                    </div>
                                </div>

                                <!-- Related Words -->
                                <div class="related-section">
                                    <h3><i class="fas fa-link"></i> Từ liên quan</h3>
                                    <div class="related-words" id="related-words">
                                        <!-- Related words will be populated by JavaScript -->
                                    </div>
                                </div>

                                <!-- Word Actions -->
                                <div class="word-actions">
                                    <button class="btn btn-outline" onclick="addToFlashcards()">
                                        <i class="fas fa-plus"></i> Thêm vào thẻ học
                                    </button>
                                    <button class="btn btn-outline" onclick="shareWord()">
                                        <i class="fas fa-share"></i> Chia sẻ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Categories -->
                <div class="quick-categories">
                    <h3 style="text-align:center; margin:40px 0 20px; color:var(--primary);">Danh mục nhanh</h3>
                    <div class="category-grid">
                        <div class="category-item" onclick="filterByCategory('noun')">
                            <i class="fas fa-file-word"></i>
                            <span>Danh từ</span>
                        </div>
                        <div class="category-item" onclick="filterByCategory('verb')">
                            <i class="fas fa-running"></i>
                            <span>Động từ</span>
                        </div>
                        <div class="category-item" onclick="filterByCategory('adjective')">
                            <i class="fas fa-palette"></i>
                            <span>Tính từ</span>
                        </div>
                        <div class="category-item" onclick="filterByCategory('adverb')">
                            <i class="fas fa-bolt"></i>
                            <span>Trạng từ</span>
                        </div>
                        <div class="category-item" onclick="showAllWords()">
                            <i class="fas fa-th-list"></i>
                            <span>Tất cả</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Login Page -->
        <div id="admin-login" class="page">
            <div class="survey-container">
                <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Đăng nhập quản trị</h2>
                <div class="form-group">
                    <label for="admin-email">Email</label>
                    <input type="email" id="admin-email" placeholder="Nhập email quản trị">
                </div>
                <div class="form-group">
                    <label for="admin-password">Mật khẩu</label>
                    <input type="password" id="admin-password" placeholder="Nhập mật khẩu quản trị">
                </div>
                <button class="btn" style="width: 100%;" onclick="adminLogin()">Đăng nhập quản trị</button>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="admin-panel" class="page">
            <h2 style="margin-bottom: 20px; color: var(--primary);">Bảng điều khiển quản trị</h2>
            
            <div class="admin-tabs">
                <div class="admin-tab active" onclick="changeAdminTab('users')">
                    <i class="fas fa-users"></i>
                    Quản lý người dùng
                </div>
                <div class="admin-tab" onclick="changeAdminTab('courses')">
                    <i class="fas fa-book"></i>
                    Quản lý khóa học
                </div>
                <div class="admin-tab" onclick="changeAdminTab('videos')">
                    <i class="fas fa-video"></i>
                    Quản lý video
                </div>
                <div class="admin-tab" onclick="changeAdminTab('progress')">
                    <i class="fas fa-chart-line"></i>
                    Theo dõi tiến độ
                </div>
            </div>
            
            <div id="users-tab" class="admin-content active">
                <h3>Danh sách người học</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Họ tên</th>
                            <th>Email</th>
                            <th>Cấp độ</th>
                            <th>Khóa học đã hoàn thành</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody id="users-table">
                        <!-- Users will be generated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div id="courses-tab" class="admin-content">
                <h3>Quản lý khóa học</h3>
                <button class="btn" style="margin-bottom: 15px;" onclick="showAddCourseForm()">Thêm khóa học mới</button>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Tên khóa học</th>
                            <th>Cấp độ</th>
                            <th>Số bài học</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody id="courses-table">
                        <!-- Courses will be generated by JavaScript -->
                    </tbody>
                </table>
                
                <div id="add-course-form" style="display: none; margin-top: 30px;">
                    <h4>Thêm khóa học mới</h4>
                    <div class="form-group">
                        <label for="course-name">Tên khóa học</label>
                        <input type="text" id="course-name" placeholder="Nhập tên khóa học">
                    </div>
                    <div class="form-group">
                        <label for="course-level">Cấp độ</label>
                        <select id="course-level">
                            <option value="basic">Cơ bản</option>
                            <option value="elementary">Sơ cấp</option>
                            <option value="intermediate">Trung cấp</option>
                            <option value="advanced">Cao cấp</option>
                            <option value="proficient">Thành thạo</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="course-description">Mô tả khóa học</label>
                        <textarea id="course-description" rows="3" placeholder="Nhập mô tả khóa học"></textarea>
                    </div>
                    <button class="btn" onclick="addCourse()">Thêm khóa học</button>
                    <button class="btn" style="background: #6c757d;" onclick="hideAddCourseForm()">Hủy</button>
                </div>
            </div>
            
            <div id="videos-tab" class="admin-content">
                <h3>Quản lý video YouTube</h3>
                <button class="btn" style="margin-bottom: 15px;" onclick="showAddVideoForm()">Thêm video mới</button>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Tiêu đề</th>
                            <th>Khóa học</th>
                            <th>Link YouTube</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody id="videos-table">
                        <!-- Videos will be generated by JavaScript -->
                    </tbody>
                </table>
                
                <div id="add-video-form" style="display: none; margin-top: 30px;">
                    <h4>Thêm video mới</h4>
                    <div class="form-group">
                        <label for="video-title">Tiêu đề video</label>
                        <input type="text" id="video-title" placeholder="Nhập tiêu đề video">
                    </div>
                    <div class="form-group">
                        <label for="video-course">Khóa học</label>
                        <select id="video-course">
                            <!-- Courses will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="video-url">Link YouTube</label>
                        <input type="text" id="video-url" placeholder="Dán link YouTube tại đây">
                    </div>
                    <div class="form-group">
                        <label for="video-description-admin">Mô tả video</label>
                        <textarea id="video-description-admin" rows="3" placeholder="Nhập mô tả video"></textarea>
                    </div>
                    <button class="btn" onclick="addVideo()">Thêm video</button>
                    <button class="btn" style="background: #6c757d;" onclick="hideAddVideoForm()">Hủy</button>
                </div>
            </div>
            
            <div id="progress-tab" class="admin-content">
                <h3>Theo dõi tiến độ người học</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Họ tên</th>
                            <th>Cấp độ hiện tại</th>
                            <th>Khóa học đã hoàn thành</th>
                            <th>Điểm trung bình</th>
                            <th>Thời gian học</th>
                        </tr>
                    </thead>
                    <tbody id="progress-table">
                        <!-- Progress data will be generated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="footer-section">
                <h3>Zlearn</h3>
                <p>Nền tảng học tiếng Anh thông minh với AI và video YouTube. Cá nhân hóa lộ trình học tập cho từng người dùng.</p>
            </div>
            <div class="footer-section">
                <h3>Liên kết nhanh</h3>
                <ul class="footer-links">
                    <li><a href="#" onclick="showPage('home')">Trang chủ</a></li>
                    <li><a href="#" onclick="showPage('dashboard')">Học tập</a></li>
                    <li><a href="#" onclick="showPage('profile')">Hồ sơ</a></li>
                    <li><a href="#" onclick="showPage('certificate')">Chứng chỉ</a></li>
                    <li><a href="#" onclick="showPage('admin-login')">Quản trị</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Liên hệ</h3>
                <p><i class="fas fa-envelope"></i> Email: support@zlearn.edu.vn</p>
                <p><i class="fas fa-phone"></i> Điện thoại: 0123 456 789</p>
                <p><i class="fas fa-map-marker-alt"></i> Địa chỉ: Hà Nội, Việt Nam</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 Zlearn. Tất cả các quyền được bảo lưu.</p>
        </div>
    </footer>

    <script>
        // API Configuration
        const GEMINI_API_KEY = "AIzaSyCIwoa2OOyaArgJwDXvKcMVg57_PUVYI5k";
        const GEMINI_API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent";
        
        // Dữ liệu mẫu với cấu trúc khóa học theo file Word
        const sampleData = {
            users: [
                { id: 1, name: "Nguyễn Văn A", email: "a@example.com", level: "intermediate", completedCourses: 3 },
                { id: 2, name: "Trần Thị B", email: "b@example.com", level: "elementary", completedCourses: 1 },
                { id: 3, name: "Lê Văn C", email: "c@example.com", level: "advanced", completedCourses: 5 }
            ],
            courses: [
                // CẤP CƠ BẢN (3 phần, 5 video mỗi phần, tổng 15 video)
                { 
                    id: 1, 
                    name: "Tiếng Anh Cơ Bản - Phần 1: Phát âm & Giới thiệu", 
                    level: "basic", 
                    description: "Làm quen với phát âm, chào hỏi và giới thiệu bản thân",
                    lessons: generateLessons("basic", 1, 5, [
                        "Phát âm bảng chữ cái và nguyên âm",
                        "Chào hỏi cơ bản và tạm biệt",
                        "Giới thiệu tên và quốc tịch",
                        "Hỏi và trả lời về nghề nghiệp",
                        "Số đếm từ 1-20 và tuổi tác"
                    ])
                },
                { 
                    id: 2, 
                    name: "Tiếng Anh Cơ Bản - Phần 2: Thì hiện tại & Hoạt động", 
                    level: "basic", 
                    description: "Học thì hiện tại đơn và các hoạt động hàng ngày",
                    lessons: generateLessons("basic", 2, 5, [
                        "Thì hiện tại đơn với động từ 'to be'",
                        "Đại từ nhân xưng và tính từ sở hữu",
                        "Hoạt động hàng ngày và thời gian",
                        "Mô tả gia đình và bạn bè",
                        "Hỏi đường và chỉ dẫn đơn giản"
                    ])
                },
                { 
                    id: 3, 
                    name: "Tiếng Anh Cơ Bản - Phần 3: Giao tiếp thực tế", 
                    level: "basic", 
                    description: "Thực hành giao tiếp trong các tình huống thực tế",
                    lessons: generateLessons("basic", 3, 5, [
                        "Mua sắm và hỏi giá",
                        "Đặt món ăn trong nhà hàng",
                        "Gọi taxi và hỏi đường",
                        "Mô tả đồ vật và màu sắc",
                        "Kiểm tra tổng kết cấp độ Cơ bản"
                    ])
                },

                // CẤP SƠ CẤP (4 phần, 6 video mỗi phần, tổng 24 video)
                { 
                    id: 4, 
                    name: "Tiếng Anh Sơ Cấp - Phần 1: Mở rộng từ vựng", 
                    level: "elementary", 
                    description: "Mở rộng vốn từ vựng và học thì quá khứ đơn",
                    lessons: generateLessons("elementary", 1, 6, [
                        "Từ vựng về gia đình và mối quan hệ",
                        "Thì quá khứ đơn với động từ có quy tắc",
                        "Động từ bất quy tắc thông dụng",
                        "Mô tả sự kiện trong quá khứ",
                        "Câu hỏi với 'Wh-' trong quá khứ",
                        "Thực hành hội thoại về kỷ niệm"
                    ])
                },
                { 
                    id: 5, 
                    name: "Tiếng Anh Sơ Cấp - Phần 2: Du lịch & Giao tiếp", 
                    level: "elementary", 
                    description: "Hội thoại du lịch và các tình huống giao tiếp",
                    lessons: generateLessons("elementary", 2, 6, [
                        "Từ vựng du lịch và phương tiện",
                        "Đặt phòng khách sạn và dịch vụ",
                        "Hỏi về thời tiết và khí hậu",
                        "Chỉ đường và phương hướng",
                        "Mua vé và đặt chỗ",
                        "Xử lý tình huống du lịch"
                    ])
                },
                { 
                    id: 6, 
                    name: "Tiếng Anh Sơ Cấp - Phần 3: Miêu tả & So sánh", 
                    level: "elementary", 
                    description: "Miêu tả người, cảm xúc và so sánh",
                    lessons: generateLessons("elementary", 3, 6, [
                        "Tính từ miêu tả ngoại hình",
                        "Diễn đạt cảm xúc và tâm trạng",
                        "So sánh hơn và so sánh nhất",
                        "Viết tin nhắn và email đơn giản",
                        "Mô tả sở thích và thói quen",
                        "Kiểm tra tổng kết Sơ cấp"
                    ])
                },
                { 
                    id: 7, 
                    name: "Tiếng Anh Sơ Cấp - Phần 4: Kỹ năng tổng hợp", 
                    level: "elementary", 
                    description: "Tổng hợp và thực hành các kỹ năng sơ cấp",
                    lessons: generateLessons("elementary", 4, 6, [
                        "Ôn tập ngữ pháp sơ cấp",
                        "Luyện nghe hội thoại hàng ngày",
                        "Thực hành phát âm nâng cao",
                        "Viết đoạn văn ngắn",
                        "Phản xạ giao tiếp nhanh",
                        "Đánh giá cuối cấp độ Sơ cấp"
                    ])
                },

                // CẤP TRUNG CẤP (5 phần, 6 video mỗi phần, tổng 30 video)
                { 
                    id: 8, 
                    name: "Tiếng Anh Trung Cấp - Phần 1: Ngữ pháp nâng cao", 
                    level: "intermediate", 
                    description: "Học cấu trúc câu phức và thì hiện tại hoàn thành",
                    lessons: generateLessons("intermediate", 1, 6, [
                        "Thì hiện tại hoàn thành",
                        "Câu điều kiện loại 1 và 2",
                        "Mệnh đề quan hệ xác định",
                        "Câu bị động ở thì hiện tại",
                        "Liên từ và trạng từ liên kết",
                        "Thực hành viết câu phức"
                    ])
                },
                { 
                    id: 9, 
                    name: "Tiếng Anh Trung Cấp - Phần 2: Giao tiếp công việc", 
                    level: "intermediate", 
                    description: "Hội thoại công việc và mô tả sự kiện",
                    lessons: generateLessons("intermediate", 2, 6, [
                        "Từ vựng văn phòng và công việc",
                        "Thuyết trình ý tưởng đơn giản",
                        "Mô tả dự án và kế hoạch",
                        "Kể chuyện và tường thuật sự kiện",
                        "Thảo luận nhóm trong công việc",
                        "Viết báo cáo ngắn"
                    ])
                },
                { 
                    id: 10, 
                    name: "Tiếng Anh Trung Cấp - Phần 3: Kỹ năng viết", 
                    level: "intermediate", 
                    description: "Phát triển kỹ năng viết và thành ngữ",
                    lessons: generateLessons("intermediate", 3, 6, [
                        "Viết đoạn văn mô tả",
                        "Thành ngữ thông dụng trong giao tiếp",
                        "Luyện nghe tin tức và báo cáo",
                        "Viết email công việc chuyên nghiệp",
                        "Phân tích văn bản ngắn",
                        "Thực hành viết luận ngắn"
                    ])
                },
                { 
                    id: 11, 
                    name: "Tiếng Anh Trung Cấp - Phần 4: Nghe nâng cao", 
                    level: "intermediate", 
                    description: "Luyện nghe nâng cao và phản xạ",
                    lessons: generateLessons("intermediate", 4, 6, [
                        "Nghe hiểu tin tức quốc tế",
                        "Phân tích hội thoại phức tạp",
                        "Luyện nghe accent khác nhau",
                        "Ghi chú khi nghe bài giảng",
                        "Phản xạ với câu hỏi phức tạp",
                        "Thực hành nghe tổng hợp"
                    ])
                },
                { 
                    id: 12, 
                    name: "Tiếng Anh Trung Cấp - Phần 5: Tổng hợp trung cấp", 
                    level: "intermediate", 
                    description: "Tổng hợp và đánh giá kỹ năng trung cấp",
                    lessons: generateLessons("intermediate", 5, 6, [
                        "Ôn tập ngữ pháp trung cấp",
                        "Luyện nói theo chủ đề phức tạp",
                        "Viết bài luận 250 từ",
                        "Phân tích và thảo luận vấn đề",
                        "Kỹ năng thuyết trình cơ bản",
                        "Kiểm tra tổng kết Trung cấp"
                    ])
                },

                // CẤP CAO CẤP (6 phần, 7 video mỗi phần, tổng 42 video)
                { 
                    id: 13, 
                    name: "Tiếng Anh Cao Cấp - Phần 1: Ngữ pháp chuyên sâu", 
                    level: "advanced", 
                    description: "Học ngữ pháp nâng cao và cấu trúc phức tạp",
                    lessons: generateLessons("advanced", 1, 7, [
                        "Câu điều kiện hỗn hợp",
                        "Mệnh đề quan hệ không xác định",
                        "Câu tường thuật nâng cao",
                        "Thể bị động ở các thì phức tạp",
                        "Đảo ngữ và cấu trúc nhấn mạnh",
                        "Liên từ phức tạp",
                        "Thực hành ngữ pháp tổng hợp"
                    ])
                },
                { 
                    id: 14, 
                    name: "Tiếng Anh Cao Cấp - Phần 2: Thuyết trình chuyên nghiệp", 
                    level: "advanced", 
                    description: "Kỹ năng thuyết trình và phỏng vấn",
                    lessons: generateLessons("advanced", 2, 7, [
                        "Kỹ thuật thuyết trình hiệu quả",
                        "Ngôn ngữ cơ thể trong thuyết trình",
                        "Xử lý câu hỏi và phản biện",
                        "Kỹ năng phỏng vấn xin việc",
                        "Đàm phán và thương lượng",
                        "Viết CV và thư xin việc",
                        "Thực hành phỏng vấn mô phỏng"
                    ])
                },
                { 
                    id: 15, 
                    name: "Tiếng Anh Cao Cấp - Phần 3: Viết học thuật", 
                    level: "advanced", 
                    description: "Phát triển kỹ năng viết học thuật",
                    lessons: generateLessons("advanced", 3, 7, [
                        "Cấu trúc bài luận học thuật",
                        "Phương pháp nghiên cứu và trích dẫn",
                        "Viết báo cáo chuyên nghiệp",
                        "Văn phong học thuật và trang trọng",
                        "Phân tích dữ liệu và biểu đồ",
                        "Viết đề xuất dự án",
                        "Chỉnh sửa và hoàn thiện văn bản"
                    ])
                },
                { 
                    id: 16, 
                    name: "Tiếng Anh Cao Cấp - Phần 4: Giao tiếp đa văn hóa", 
                    level: "advanced", 
                    description: "Giao tiếp trong môi trường đa văn hóa",
                    lessons: generateLessons("advanced", 4, 7, [
                        "Hiểu biết văn hóa các nước nói tiếng Anh",
                        "Giao tiếp trong môi trường quốc tế",
                        "Xử lý xung đột văn hóa",
                        "Thuyết phục và tạo ảnh hưởng",
                        "Đàm phán đa văn hóa",
                        "Kỹ năng lãnh đạo bằng tiếng Anh",
                        "Case study giao tiếp đa văn hóa"
                    ])
                },
                { 
                    id: 17, 
                    name: "Tiếng Anh Cao Cấp - Phần 5: Chuyên ngành", 
                    level: "advanced", 
                    description: "Tiếng Anh chuyên ngành và kỹ thuật",
                    lessons: generateLessons("advanced", 5, 7, [
                        "Từ vựng chuyên ngành kinh tế",
                        "Thuật ngữ kỹ thuật và công nghệ",
                        "Tiếng Anh y khoa và sức khỏe",
                        "Ngôn ngữ pháp lý và hợp đồng",
                        "Tiếng Anh trong giáo dục",
                        "Thuật ngữ marketing và quảng cáo",
                        "Thực hành đọc hiểu tài liệu chuyên ngành"
                    ])
                },
                { 
                    id: 18, 
                    name: "Tiếng Anh Cao Cấp - Phần 6: Tổng hợp cao cấp", 
                    level: "advanced", 
                    description: "Tổng hợp và hoàn thiện kỹ năng cao cấp",
                    lessons: generateLessons("advanced", 6, 7, [
                        "Ôn tập ngữ pháp nâng cao",
                        "Luyện nói chủ đề phức tạp",
                        "Viết luận học thuật 500 từ",
                        "Phân tích văn bản chuyên sâu",
                        "Kỹ năng tranh luận và biện luận",
                        "Thuyết trình chuyên nghiệp",
                        "Kiểm tra tổng kết Cao cấp"
                    ])
                },

                // CẤP THÀNH THẠO (8 phần, 8 video mỗi phần, tổng 64 video)
                { 
                    id: 19, 
                    name: "Tiếng Anh Thành Thạo - Phần 1: Nghe đa dạng", 
                    level: "proficient", 
                    description: "Luyện nghe accent đa dạng và tốc độ tự nhiên",
                    lessons: generateLessons("proficient", 1, 8, [
                        "Nghe hiểu accent Anh - Mỹ",
                        "Phân biệt accent Anh - Anh và Anh - Mỹ",
                        "Kỹ thuật shadowing nâng cao",
                        "Nghe tốc độ tự nhiên của người bản ngữ",
                        "Phân tích phim ảnh và chương trình TV",
                        "Nghe podcast và radio quốc tế",
                        "Kỹ năng nghe lecture học thuật",
                        "Thực hành nghe tổng hợp nâng cao"
                    ])
                },
                { 
                    id: 20, 
                    name: "Tiếng Anh Thành Thạo - Phần 2: Thành ngữ nâng cao", 
                    level: "proficient", 
                    description: "Học thành ngữ và cụm động từ phức tạp",
                    lessons: generateLessons("proficient", 2, 8, [
                        "Thành ngữ trong văn nói hàng ngày",
                        "Cụm động từ nâng cao",
                        "Tiếng lóng và từ thông dụng",
                        "Biểu thức cố định trong học thuật",
                        "Thành ngữ trong văn học",
                        "Cụm từ chuyên ngành nâng cao",
                        "Phân tích ngữ nghĩa thành ngữ",
                        "Ứng dụng thành ngữ trong giao tiếp"
                    ])
                },
                { 
                    id: 21, 
                    name: "Tiếng Anh Thành Thạo - Phần 3: Tranh luận và hùng biện", 
                    level: "proficient", 
                    description: "Kỹ năng tranh luận và kể chuyện nâng cao",
                    lessons: generateLessons("proficient", 3, 8, [
                        "Kỹ thuật tranh luận hiệu quả",
                        "Xây dựng luận điểm và bằng chứng",
                        "Phản biện và phản hồi ý kiến",
                        "Kỹ năng hùng biện thuyết phục",
                        "Kể chuyện và tường thuật nâng cao",
                        "Sử dụng ngôn ngữ hình ảnh và ẩn dụ",
                        "Điều chỉnh ngôn ngữ theo đối tượng",
                        "Thực hành debate chuyên nghiệp"
                    ])
                },
                { 
                    id: 22, 
                    name: "Tiếng Anh Thành Thạo - Phần 4: Viết sáng tạo", 
                    level: "proficient", 
                    description: "Phát triển kỹ năng viết sáng tạo và phân tích",
                    lessons: generateLessons("proficient", 4, 8, [
                        "Kỹ thuật viết sáng tạo",
                        "Phân tích văn học và phê bình",
                        "Viết bài nghiên cứu học thuật",
                        "Kỹ năng biên tập và hiệu đính",
                        "Viết content marketing chuyên nghiệp",
                        "Phong cách viết cá nhân và độc đáo",
                        "Viết kịch bản và kể chuyện",
                        "Hoàn thiện portfolio viết"
                    ])
                },
                { 
                    id: 23, 
                    name: "Tiếng Anh Thành Thạo - Phần 5: Tư duy phản biện", 
                    level: "proficient", 
                    description: "Phát triển tư duy phản biện bằng tiếng Anh",
                    lessons: generateLessons("proficient", 5, 8, [
                        "Nguyên lý tư duy phản biện",
                        "Phân tích logic và ngụy biện",
                        "Đánh giá nguồn thông tin",
                        "Giải quyết vấn đề phức tạp",
                        "Ra quyết định dựa trên phân tích",
                        "Tư duy hệ thống trong giao tiếp",
                        "Phản biện văn bản học thuật",
                        "Case study tư duy phản biện"
                    ])
                },
                { 
                    id: 24, 
                    name: "Tiếng Anh Thành Thạo - Phần 6: Giao tiếp đỉnh cao", 
                    level: "proficient", 
                    description: "Hoàn thiện kỹ năng giao tiếp ở cấp độ thành thạo",
                    lessons: generateLessons("proficient", 6, 8, [
                        "Nghệ thuật giao tiếp tinh tế",
                        "Điều chỉnh ngôn ngữ theo ngữ cảnh",
                        "Giao tiếp trong môi trường căng thẳng",
                        "Kỹ năng đàm phán đỉnh cao",
                        "Xây dựng mối quan hệ chuyên nghiệp",
                        "Thuyết phục và gây ảnh hưởng",
                        "Giao tiếp phi ngôn từ nâng cao",
                        "Thực hành giao tiếp thực tế"
                    ])
                },
                { 
                    id: 25, 
                    name: "Tiếng Anh Thành Thạo - Phần 7: Ứng dụng thực tiễn", 
                    level: "proficient", 
                    description: "Ứng dụng tiếng Anh trong các tình huống thực tế",
                    lessons: generateLessons("proficient", 7, 8, [
                        "Tiếng Anh trong hội nghị quốc tế",
                        "Giao tiếp trong môi trường đa quốc gia",
                        "Tiếng Anh cho nhà quản lý",
                        "Giao tiếp trong lĩnh vực giáo dục",
                        "Tiếng Anh trong truyền thông",
                        "Giao tiếp trong lĩnh vực y tế",
                        "Tiếng Anh trong công nghệ và startup",
                        "Case study giao tiếp chuyên nghiệp"
                    ])
                },
                { 
                    id: 26, 
                    name: "Tiếng Anh Thành Thạo - Phần 8: Kiểm tra tổng thể", 
                    level: "proficient", 
                    description: "Đánh giá tổng thể và hoàn thiện kỹ năng",
                    lessons: generateLessons("proficient", 8, 8, [
                        "Ôn tập toàn diện ngữ pháp",
                        "Luyện tập phát âm hoàn hảo",
                        "Thực hành nghe nói tổng hợp",
                        "Kiểm tra viết học thuật",
                        "Đánh giá kỹ năng đọc hiểu",
                        "Thi thử speaking chuyên nghiệp",
                        "Phân tích và cải thiện điểm yếu",
                        "Kiểm tra tổng kết Thành thạo"
                    ])
                }
            ],
            surveyQuestions: [
                {
                    question: "Bạn đã học tiếng Anh được bao lâu?",
                    options: [
                        "Chưa bao giờ học",
                        "Dưới 6 tháng",
                        "6 tháng - 1 năm",
                        "1 - 2 năm",
                        "Trên 2 năm"
                    ]
                },
                {
                    question: "Bạn có thể giới thiệu bản thân bằng tiếng Anh không?",
                    options: [
                        "Không thể",
                        "Chỉ nói được tên",
                        "Có thể nói tên và một số thông tin cơ bản",
                        "Có thể giới thiệu khá chi tiết",
                        "Có thể giới thiệu một cách trôi chảy"
                    ]
                },
                {
                    question: "Bạn hiểu được bao nhiêu % khi nghe người bản ngữ nói chuyện?",
                    options: [
                        "Dưới 20%",
                        "20-40%",
                        "40-60%",
                        "60-80%",
                        "Trên 80%"
                    ]
                },
                {
                    question: "Bạn có thể viết một đoạn văn ngắn bằng tiếng Anh không?",
                    options: [
                        "Không thể",
                        "Chỉ viết được vài câu đơn giản",
                        "Có thể viết đoạn văn ngắn với nhiều lỗi",
                        "Có thể viết đoạn văn với ít lỗi",
                        "Có thể viết đoạn văn dài và phức tạp"
                    ]
                },
                {
                    question: "Bạn có thể đọc và hiểu báo/tài liệu tiếng Anh không?",
                    options: [
                        "Không thể",
                        "Chỉ hiểu một vài từ đơn lẻ",
                        "Hiểu được ý chính của đoạn văn ngắn",
                        "Hiểu được hầu hết nội dung",
                        "Hiểu hoàn toàn và có thể phân tích"
                    ]
                }
            ]
        };

        // Hàm tạo bài học tự động theo cấu trúc
        function generateLessons(level, partNumber, lessonCount, titles) {
            const lessons = [];
            const levelNames = {
                'basic': 'Cơ bản',
                'elementary': 'Sơ cấp', 
                'intermediate': 'Trung cấp',
                'advanced': 'Cao cấp',
                'proficient': 'Thành thạo'
            };
            
            for (let i = 1; i <= lessonCount; i++) {
                const vocabCount = level === 'basic' ? 5 : 
                                 level === 'elementary' ? 6 :
                                 level === 'intermediate' ? 7 :
                                 level === 'advanced' ? 8 : 10;
                
                const vocabulary = [];
                for (let v = 1; v <= vocabCount; v++) {
                    vocabulary.push({
                        word: `${levelNames[level]}Word${partNumber}${i}${v}`,
                        meaning: `Nghĩa của từ ${levelNames[level]} ${partNumber}.${i}.${v}`,
                        example: `Đây là ví dụ cho từ ${levelNames[level]} ${partNumber}.${i}.${v}`
                    });
                }
                
                lessons.push({
                    id: partNumber * 100 + i,
                    title: titles[i-1] || `Bài ${i}: ${levelNames[level]} Phần ${partNumber}`,
                    videoUrl: "https://www.youtube.com/embed/7Z0_NKp-COQ",
                    description: `Mô tả bài học ${levelNames[level]} Phần ${partNumber} Bài ${i}`,
                    vocabulary: vocabulary,
                    grammar: `Điểm ngữ pháp ${levelNames[level]} Phần ${partNumber} Bài ${i}. ${level === 'basic' ? "Đây là điểm ngữ pháp cơ bản." : level === 'elementary' ? "Đây là điểm ngữ pháp sơ cấp." : level === 'intermediate' ? "Đây là điểm ngữ pháp trung cấp." : level === 'advanced' ? "Đây là điểm ngữ pháp cao cấp." : "Đây là điểm ngữ pháp thành thạo."}`,
                    test: [
                        {
                            question: `Câu hỏi ${levelNames[level]} ${partNumber}.${i}.1?`,
                            options: ["Lựa chọn A", "Lựa chọn B", "Lựa chọn C", "Lựa chọn D"],
                            answer: Math.floor(Math.random() * 4)
                        },
                        {
                            question: `Câu hỏi ${levelNames[level]} ${partNumber}.${i}.2?`,
                            options: ["Phương án 1", "Phương án 2", "Phương án 3", "Phương án 4"],
                            answer: Math.floor(Math.random() * 4)
                        },
                        {
                            question: `Câu hỏi ${levelNames[level]} ${partNumber}.${i}.3?`,
                            options: ["Đáp án X", "Đáp án Y", "Đáp án Z", "Đáp án W"],
                            answer: Math.floor(Math.random() * 4)
                        }
                    ]
                });
            }
            
            return lessons;
        }

        // Enhanced dictionary words data với nhiều từ vựng hơn
        const enhancedDictionaryWords = [
            { word: "computer", meaning: "máy tính", example: "I use a computer for work every day.", type: "noun", pronunciation: "kəmˈpjuːtər" },
            { word: "beautiful", meaning: "đẹp", example: "She has a beautiful smile.", type: "adjective", pronunciation: "ˈbjuːtɪfəl" },
            { word: "quickly", meaning: "một cách nhanh chóng", example: "He ran quickly to catch the bus.", type: "adverb", pronunciation: "ˈkwɪkli" },
            { word: "understand", meaning: "hiểu", example: "Do you understand this lesson?", type: "verb", pronunciation: "ˌʌndərˈstænd" },
            { word: "happiness", meaning: "hạnh phúc", example: "Money doesn't always bring happiness.", type: "noun", pronunciation: "ˈhæpinəs" },
            { word: "important", meaning: "quan trọng", example: "It's important to study every day.", type: "adjective", pronunciation: "ɪmˈpɔːrtənt" },
            { word: "carefully", meaning: "một cách cẩn thận", example: "Read the instructions carefully.", type: "adverb", pronunciation: "ˈkerfəli" },
            { word: "development", meaning: "sự phát triển", example: "The development of technology is rapid.", type: "noun", pronunciation: "dɪˈveləpmənt" },
            { word: "education", meaning: "giáo dục", example: "Education is the key to success.", type: "noun", pronunciation: "ˌedʒuˈkeɪʃən" },
            { word: "environment", meaning: "môi trường", example: "We must protect our environment.", type: "noun", pronunciation: "ɪnˈvaɪrənmənt" }
        ];

        // Biến toàn cục
        let currentUser = null;
        let currentCourse = null;
        let currentLesson = null;
        let userLevel = null;
        let userProgress = 0;
        let currentQuestionIndex = 0;
        let surveyAnswers = [];
        let dictionaryWords = [];
        let currentDetailWord = '';
        let recentSearches = JSON.parse(localStorage.getItem('zlearn_recent_searches') || '[]');

        // NEW: Xử lý sự kiện Enter trong chat
        function handleChatInputKeypress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // NEW: Xử lý sự kiện Enter trong tìm kiếm từ điển
        function handleDictionarySearchKeypress(event) {
            if (event.key === 'Enter') {
                searchWord();
            }
        }

        // Hiển thị trang
        function showPage(pageId) {
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            document.querySelectorAll(`[onclick="showPage('${pageId}')"]`).forEach(link => {
                link.classList.add('active');
            });
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Close mobile menu if open
            mobileMenu.classList.remove('active');
            overlay.classList.remove('active');
            
            // Cập nhật nội dung động cho một số trang
            if (pageId === 'survey') {
                currentQuestionIndex = 0;
                surveyAnswers = [];
                showQuestion(currentQuestionIndex);
            } else if (pageId === 'dashboard') {
                updateDashboard();
            } else if (pageId === 'profile') {
                updateProfile();
            } else if (pageId === 'certificate') {
                checkCertificate();
            } else if (pageId === 'admin-panel') {
                updateAdminPanel();
            } else if (pageId === 'dictionary') {
                initializeDictionary();
            }
        }

        // NEW: Cập nhật trang hồ sơ với kiểm tra đăng nhập
        function updateProfile() {
            if (currentUser) {
                // Hiển thị nội dung hồ sơ
                document.getElementById('profile-login-required').style.display = 'none';
                document.getElementById('profile-content').style.display = 'block';
                
                document.getElementById('profile-name').textContent = currentUser.name;
                document.getElementById('profile-email').textContent = currentUser.email;
                document.getElementById('profile-level').textContent = getLevelName(currentUser.level);
                
                // Cập nhật thống kê
                document.getElementById('stat-courses').textContent = currentUser.completedCourses || 0;
                document.getElementById('stat-hours').textContent = Math.floor((currentUser.completedCourses || 0) * 2.5);
                document.getElementById('stat-words').textContent = Math.floor((currentUser.completedCourses || 0) * 25);
                document.getElementById('stat-streak').textContent = Math.floor(Math.random() * 10) + 1;
            } else {
                // Hiển thị thông báo yêu cầu đăng nhập
                document.getElementById('profile-login-required').style.display = 'block';
                document.getElementById('profile-content').style.display = 'none';
            }
        }

        // NEW: Khởi tạo từ điển với nhiều từ vựng hơn
        function initializeDictionary() {
            dictionaryWords = [];
            
            // Thêm các từ từ enhanced dictionary
            enhancedDictionaryWords.forEach(word => {
                dictionaryWords.push(word);
            });
            
            // Thu thập tất cả từ vựng từ các khóa học
            sampleData.courses.forEach(course => {
                course.lessons.forEach(lesson => {
                    if (lesson.vocabulary) {
                        lesson.vocabulary.forEach(vocab => {
                            // Kiểm tra xem từ đã tồn tại chưa
                            if (!dictionaryWords.find(w => w.word.toLowerCase() === vocab.word.toLowerCase())) {
                                dictionaryWords.push({
                                    word: vocab.word,
                                    meaning: vocab.meaning,
                                    example: vocab.example,
                                    type: 'noun',
                                    pronunciation: vocab.word
                                });
                            }
                        });
                    }
                });
            });
            
            updateDictionaryUI();
        }

        // NEW: Cập nhật giao diện từ điển
        function updateDictionaryUI() {
            // Hiển thị từ nổi bật
            const featuredContainer = document.getElementById('featured-words');
            featuredContainer.innerHTML = '';
            
            const featuredWords = dictionaryWords.slice(0, 8);
            featuredWords.forEach(word => {
                const wordItem = document.createElement('div');
                wordItem.className = 'word-list-item';
                wordItem.innerHTML = `
                    <span class="word">${word.word}</span>
                    <span class="meaning">${word.meaning}</span>
                `;
                wordItem.onclick = () => showWordDetail(word);
                featuredContainer.appendChild(wordItem);
            });
            
            // Hiển thị từ thông dụng
            const commonContainer = document.getElementById('common-words');
            commonContainer.innerHTML = '';
            
            const commonWords = dictionaryWords.slice(8, 16);
            commonWords.forEach(word => {
                const wordItem = document.createElement('div');
                wordItem.className = 'word-list-item';
                wordItem.innerHTML = `
                    <span class="word">${word.word}</span>
                    <span class="meaning">${word.meaning}</span>
                `;
                wordItem.onclick = () => showWordDetail(word);
                commonContainer.appendChild(wordItem);
            });
            
            // Hiển thị tìm kiếm gần đây
            updateRecentSearches();
        }

        // NEW: Cập nhật tìm kiếm gần đây
        function updateRecentSearches() {
            const recentContainer = document.getElementById('recent-words');
            recentContainer.innerHTML = '';
            
            if (recentSearches.length === 0) {
                recentContainer.innerHTML = '<p style="color:#666; font-style:italic; text-align:center;">Chưa có từ tìm kiếm</p>';
                return;
            }
            
            recentSearches.forEach(word => {
                const item = document.createElement('div');
                item.className = 'word-list-item';
                item.innerHTML = `
                    <span class="word">${word.word}</span>
                    <span class="meaning">${word.meaning}</span>
                `;
                item.onclick = () => showWordDetail(word);
                recentContainer.appendChild(item);
            });
        }

        // NEW: Tìm kiếm từ
        function searchWord() {
            const searchInput = document.getElementById('dictionary-search');
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (!searchTerm) {
                showToast('Vui lòng nhập từ cần tra cứu!', 'error');
                return;
            }
            
            const foundWord = dictionaryWords.find(word => 
                word.word.toLowerCase() === searchTerm
            );
            
            if (foundWord) {
                addToRecentSearches(foundWord);
                showWordDetail(foundWord);
            } else {
                showToast('Không tìm thấy từ này trong từ điển.', 'error');
            }
        }

        // NEW: Hiển thị chi tiết từ
        function showWordDetail(word) {
            currentDetailWord = word.word;
            
            // Hide placeholder, show detail
            document.getElementById('word-detail-placeholder').style.display = 'none';
            document.getElementById('word-detail-content').style.display = 'block';
            
            // Update word details
            document.getElementById('detail-word').textContent = word.word;
            document.getElementById('detail-phonetic').textContent = `/${word.pronunciation || word.word}/`;
            document.getElementById('detail-type').textContent = getWordTypeDisplay(word.type);
            document.getElementById('detail-meaning').textContent = word.meaning;
            document.getElementById('detail-example').textContent = word.example;
            
            // Show related words
            showRelatedWords(word);
        }

        // NEW: Hiển thị từ liên quan
        function showRelatedWords(word) {
            const relatedContainer = document.getElementById('related-words');
            relatedContainer.innerHTML = '';
            
            // Find words with same type or similar meaning
            const related = dictionaryWords
                .filter(w => w.type === word.type && w.word !== word.word)
                .slice(0, 6);
            
            if (related.length > 0) {
                related.forEach(relatedWord => {
                    const relatedElement = document.createElement('div');
                    relatedElement.className = 'related-word';
                    relatedElement.textContent = relatedWord.word;
                    relatedElement.onclick = () => showWordDetail(relatedWord);
                    relatedContainer.appendChild(relatedElement);
                });
            } else {
                relatedContainer.innerHTML = '<p style="color:#666; font-style:italic;">Không có từ liên quan</p>';
            }
        }

        // NEW: Thêm vào tìm kiếm gần đây
        function addToRecentSearches(word) {
            // Remove if already exists
            recentSearches = recentSearches.filter(w => w.word !== word.word);
            // Add to beginning
            recentSearches.unshift(word);
            // Keep only last 10
            recentSearches = recentSearches.slice(0, 10);
            // Save to localStorage
            localStorage.setItem('zlearn_recent_searches', JSON.stringify(recentSearches));
            // Update UI
            updateRecentSearches();
        }

        // NEW: Hiển thị loại từ
        function getWordTypeDisplay(type) {
            const typeMap = {
                'noun': 'Danh từ',
                'verb': 'Động từ',
                'adjective': 'Tính từ',
                'adverb': 'Trạng từ',
                'preposition': 'Giới từ',
                'conjunction': 'Liên từ',
                'interjection': 'Thán từ'
            };
            return typeMap[type] || 'Từ vựng';
        }

        // NEW: Lọc theo danh mục
        function filterByCategory(category) {
            const filteredWords = dictionaryWords.filter(word => word.type === category).slice(0, 10);
            updateWordLists(filteredWords, `${getWordTypeDisplay(category)} phổ biến`);
        }

        // NEW: Hiển thị tất cả từ
        function showAllWords() {
            updateDictionaryUI();
        }

        // NEW: Cập nhật danh sách từ
        function updateWordLists(words, title) {
            const commonContainer = document.getElementById('common-words');
            commonContainer.innerHTML = `<h3><i class="fas fa-list"></i> ${title}</h3>`;
            
            const wordList = document.createElement('div');
            wordList.className = 'word-list';
            
            words.forEach(word => {
                const item = document.createElement('div');
                item.className = 'word-list-item';
                item.innerHTML = `
                    <span class="word">${word.word}</span>
                    <span class="meaning">${word.meaning}</span>
                `;
                item.onclick = () => showWordDetail(word);
                wordList.appendChild(item);
            });
            
            commonContainer.appendChild(wordList);
        }

        // NEW: Thêm vào thẻ học
        function addToFlashcards() {
            if (currentDetailWord) {
                showToast(`Đã thêm "${currentDetailWord}" vào thẻ học`, 'success');
            }
        }

        // NEW: Chia sẻ từ
        function shareWord() {
            if (currentDetailWord) {
                showToast('Đã sao chép từ vựng để chia sẻ', 'success');
            }
        }

        // Các hàm còn lại giữ nguyên từ code gốc
        function showQuestion(index) {
            const container = document.getElementById('survey-questions');
            const question = sampleData.surveyQuestions[index];
            
            container.innerHTML = `
                <div class="question">
                    <h3>Câu ${index + 1}: ${question.question}</h3>
                    <div class="options">
                        ${question.options.map((option, optIndex) => `
                            <label>
                                <input type="radio" name="question" value="${optIndex}">
                                ${option}
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Cập nhật progress bar
            const progress = ((index + 1) / sampleData.surveyQuestions.length) * 100;
            document.getElementById('survey-progress-bar').style.width = `${progress}%`;
            
            // Cập nhật nút điều hướng
            document.getElementById('prev-question').style.display = index === 0 ? 'none' : 'inline-flex';
            document.getElementById('next-question').innerHTML = index === sampleData.surveyQuestions.length - 1 ? 
                'Hoàn thành <i class="fas fa-check"></i>' : 
                'Câu tiếp theo <i class="fas fa-arrow-right"></i>';
        }

        function nextQuestion() {
            const selectedOption = document.querySelector('input[name="question"]:checked');
            
            if (!selectedOption) {
                showToast('Vui lòng chọn một đáp án!', 'error');
                return;
            }
            
            surveyAnswers[currentQuestionIndex] = parseInt(selectedOption.value);
            
            if (currentQuestionIndex < sampleData.surveyQuestions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            } else {
                submitSurvey();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
            }
        }

        function submitSurvey() {
            // Tính điểm khảo sát (đơn giản hóa)
            let score = 0;
            
            surveyAnswers.forEach(answer => {
                score += answer;
            });
            
            // Xác định cấp độ dựa trên điểm
            if (score <= 5) userLevel = 'basic';
            else if (score <= 10) userLevel = 'elementary';
            else if (score <= 15) userLevel = 'intermediate';
            else if (score <= 18) userLevel = 'advanced';
            else userLevel = 'proficient';
            
            // Lưu thông tin người dùng
            if (currentUser) {
                currentUser.level = userLevel;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
            
            // Hiển thị kết quả
            showToast(`Kết quả khảo sát: Bạn đang ở cấp độ ${getLevelName(userLevel)}`, 'success');
            
            // Chuyển đến trang dashboard
            showPage('dashboard');
        }

        function updateDashboard() {
            // Cập nhật thông tin cấp độ
            if (currentUser && currentUser.level) {
                document.getElementById('current-level').textContent = getLevelName(currentUser.level);
                document.getElementById('user-level').textContent = getLevelName(currentUser.level);
                
                // Tính phần trăm tiến độ (giả lập)
                const levelProgress = {
                    'basic': 20,
                    'elementary': 40,
                    'intermediate': 60,
                    'advanced': 80,
                    'proficient': 100
                };
                
                userProgress = levelProgress[currentUser.level] || 0;
                document.getElementById('level-progress').style.width = `${userProgress}%`;
                document.getElementById('progress-text').textContent = `${userProgress}% hoàn thành`;
            }
            
            // Cập nhật thống kê
            if (currentUser) {
                document.getElementById('completed-courses').textContent = currentUser.completedCourses || 0;
                document.getElementById('completed-tests').textContent = currentUser.completedTests || 0;
                document.getElementById('average-score').textContent = currentUser.averageScore || '0';
            }
            
            // Hiển thị khóa học
            const userCoursesContainer = document.getElementById('user-courses');
            userCoursesContainer.innerHTML = '';
            
            sampleData.courses.forEach(course => {
                const courseCard = document.createElement('div');
                courseCard.className = 'course-card';
                courseCard.style.cursor = 'pointer';
                courseCard.onclick = () => openCourse(course);
                
                courseCard.innerHTML = `
                    <div class="course-thumbnail">
                        <i class="fas fa-play-circle"></i>
                    </div>
                    <div class="course-content">
                        <h4>${course.name}</h4>
                        <p>${course.description}</p>
                        <div class="course-meta">
                            <span>Cấp độ: ${getLevelName(course.level)}</span>
                            <span>${course.lessons.length} bài học</span>
                        </div>
                    </div>
                `;
                
                userCoursesContainer.appendChild(courseCard);
            });
        }

        function openCourse(course) {
            currentCourse = course;
            document.getElementById('course-title').textContent = course.name;
            
            // Hiển thị danh sách bài học
            const lessonList = document.getElementById('lesson-list');
            lessonList.innerHTML = '';
            
            course.lessons.forEach((lesson, index) => {
                const lessonItem = document.createElement('li');
                lessonItem.className = 'lesson-item';
                if (index === 0) {
                    lessonItem.classList.add('active');
                    currentLesson = lesson;
                    updateLessonContent(lesson);
                }
                lessonItem.innerHTML = `
                    <i class="fas fa-play-circle"></i>
                    <span>Bài ${index + 1}: ${lesson.title}</span>
                `;
                lessonItem.onclick = () => {
                    document.querySelectorAll('.lesson-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    lessonItem.classList.add('active');
                    currentLesson = lesson;
                    updateLessonContent(lesson);
                };
                lessonList.appendChild(lessonItem);
            });
            
            // Hiển thị trang khóa học
            showPage('course');
        }

        function updateLessonContent(lesson) {
            // Cập nhật video
            document.getElementById('course-video').src = lesson.videoUrl;
            document.getElementById('video-title').textContent = lesson.title;
            document.getElementById('video-description').textContent = lesson.description;
            
            // Cập nhật từ vựng
            const vocabList = document.getElementById('vocab-list');
            vocabList.innerHTML = '';
            
            if (lesson.vocabulary) {
                lesson.vocabulary.forEach(vocab => {
                    const vocabItem = document.createElement('div');
                    vocabItem.className = 'vocab-item';
                    vocabItem.innerHTML = `
                        <div class="vocab-front">
                            <div class="vocab-word">${vocab.word}</div>
                            <div class="vocab-pronunciation">
                                <button class="pronounce-btn" onclick="pronounceWord('${vocab.word}')">
                                    <i class="fas fa-volume-up"></i>
                                </button>
                                <span>Nhấn để xem nghĩa</span>
                            </div>
                        </div>
                        <div class="vocab-back">
                            <div class="vocab-meaning">${vocab.meaning}</div>
                            <div class="vocab-example">${vocab.example}</div>
                            <div class="vocab-pronunciation">
                                <button class="pronounce-btn" onclick="pronounceWord('${vocab.word}')">
                                    <i class="fas fa-volume-up"></i>
                                </button>
                                <span>Nhấn để quay lại</span>
                            </div>
                        </div>
                    `;
                    vocabItem.onclick = () => {
                        vocabItem.classList.toggle('flipped');
                    };
                    vocabList.appendChild(vocabItem);
                });
            } else {
                vocabList.innerHTML = '<p>Chưa có từ vựng cho bài học này.</p>';
            }
            
            // Cập nhật ngữ pháp
            const grammarContent = document.getElementById('grammar-content');
            if (lesson.grammar) {
                grammarContent.innerHTML = `
                    <div class="grammar-point">
                        <h4>Điểm ngữ pháp chính</h4>
                        <p>${lesson.grammar}</p>
                        <div class="grammar-example">
                            <p><strong>Ví dụ:</strong></p>
                            <p>${lesson.vocabulary && lesson.vocabulary.length > 0 ? lesson.vocabulary[0].example : 'Không có ví dụ'}</p>
                        </div>
                        <div class="grammar-note">
                            <p><strong>Lưu ý:</strong> Hãy thực hành điểm ngữ pháp này trong các câu của riêng bạn.</p>
                        </div>
                    </div>
                `;
            } else {
                grammarContent.innerHTML = '<p>Chưa có nội dung ngữ pháp cho bài học này.</p>';
            }
            
            // Tạo câu hỏi kiểm tra
            generateTestQuestions(lesson);
            
            // Reset chat
            document.getElementById('chat-messages').innerHTML = `
                <div class="message ai-message">
                    Xin chào! Tôi là trợ lý AI của Zlearn. Hãy trò chuyện với tôi về chủ đề "${lesson.title}" nhé!
                </div>
            `;
        }

        function changeTab(tabName) {
            // Ẩn tất cả các tab
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Bỏ active tất cả các tab
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Hiển thị tab được chọn
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // Đánh dấu tab được chọn
            document.querySelectorAll('.tab').forEach(tab => {
                if (tab.textContent.toLowerCase().includes(tabName)) {
                    tab.classList.add('active');
                }
            });
        }

        function generateTestQuestions(lesson) {
            const testContainer = document.getElementById('test-questions');
            testContainer.innerHTML = '';
            
            if (!lesson.test || lesson.test.length === 0) {
                testContainer.innerHTML = '<p>Chưa có câu hỏi kiểm tra cho bài học này.</p>';
                return;
            }
            
            const questions = lesson.test;
            
            questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'test-question';
                
                const questionTitle = document.createElement('h4');
                questionTitle.textContent = `Câu ${index + 1}: ${q.question}`;
                questionDiv.appendChild(questionTitle);
                
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';
                
                q.options.forEach((option, optIndex) => {
                    const label = document.createElement('label');
                    
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = `test-question-${index}`;
                    input.value = optIndex;
                    
                    label.appendChild(input);
                    label.appendChild(document.createTextNode(option));
                    optionsDiv.appendChild(label);
                });
                
                questionDiv.appendChild(optionsDiv);
                testContainer.appendChild(questionDiv);
            });
        }

        function submitTest() {
            let score = 0;
            const totalQuestions = document.querySelectorAll('.test-question').length;
            
            if (totalQuestions === 0) {
                showToast('Không có câu hỏi nào để chấm điểm!', 'error');
                return;
            }
            
            // In a real app, we would check the answers against the correct ones
            // For demo, we'll just show a random score
            score = Math.floor(Math.random() * totalQuestions) + 1;
            
            // Cập nhật thông tin người dùng
            if (currentUser) {
                currentUser.completedTests = (currentUser.completedTests || 0) + 1;
                currentUser.averageScore = ((currentUser.averageScore || 0) + score) / currentUser.completedTests;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
            
            // Hiển thị kết quả
            showToast(`Kết quả bài kiểm tra: ${score}/${totalQuestions} (${(score/totalQuestions*100).toFixed(0)}%)`, 'success');
            
            // Nếu điểm cao, hoàn thành khóa học
            if (score >= 4) {
                if (currentUser) {
                    currentUser.completedCourses = (currentUser.completedCourses || 0) + 1;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    // Nếu hoàn thành cấp độ thành thạo, cấp chứng chỉ
                    if (currentUser.level === 'proficient' && currentUser.completedCourses >= 5) {
                        awardCertificate();
                    }
                }
                
                showToast('Chúc mừng! Bạn đã hoàn thành khóa học này.', 'success');
            }
        }

        function checkCertificate() {
            const hasCertificate = currentUser && currentUser.level === 'proficient' && currentUser.completedCourses >= 5;
            
            if (hasCertificate) {
                document.getElementById('certificate-content').style.display = 'block';
                document.getElementById('no-certificate').style.display = 'none';
                
                // Cập nhật thông tin chứng chỉ
                document.getElementById('certificate-name').textContent = currentUser.name || 'Học viên';
                document.getElementById('certificate-date').textContent = new Date().toLocaleDateString('vi-VN');
                document.getElementById('certificate-code').textContent = `ZL-${currentUser.id}-${Date.now().toString().slice(-4)}`;
            } else {
                document.getElementById('certificate-content').style.display = 'none';
                document.getElementById('no-certificate').style.display = 'block';
            }
        }

        function awardCertificate() {
            if (currentUser) {
                currentUser.hasCertificate = true;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showToast('Chúc mừng! Bạn đã nhận được chứng chỉ tiếng Anh thành thạo từ Zlearn.', 'success');
            }
        }

        function downloadCertificate() {
            showToast('Tính năng tải chứng chỉ PDF đang được phát triển.', 'success');
        }

        function startLearning() {
            if (currentUser) {
                showPage('dashboard');
            } else {
                showPage('survey');
            }
        }

        function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (email && password) {
                // Đơn giản hóa: tạo người dùng mới hoặc đăng nhập
                currentUser = {
                    id: Date.now(),
                    name: "Người dùng Zlearn",
                    email: email,
                    level: 'basic',
                    completedCourses: 0,
                    completedTests: 0,
                    averageScore: 0
                };
                
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Cập nhật giao diện
                document.getElementById('login-btn').style.display = 'none';
                document.getElementById('register-btn').style.display = 'none';
                document.getElementById('logout-btn').style.display = 'inline-block';
                document.getElementById('mobile-login-btn').style.display = 'none';
                document.getElementById('mobile-register-btn').style.display = 'none';
                document.getElementById('mobile-logout-btn').style.display = 'flex';
                
                // Chuyển đến trang chủ
                showPage('home');
                
                showToast('Đăng nhập thành công!', 'success');
            } else {
                showToast('Vui lòng nhập đầy đủ thông tin.', 'error');
            }
        }

        function register() {
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;
            
            if (name && email && password && confirm) {
                if (password !== confirm) {
                    showToast('Mật khẩu xác nhận không khớp.', 'error');
                    return;
                }
                
                // Đơn giản hóa: tạo người dùng mới
                currentUser = {
                    id: Date.now(),
                    name: name,
                    email: email,
                    level: 'basic',
                    completedCourses: 0,
                    completedTests: 0,
                    averageScore: 0
                };
                
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Cập nhật giao diện
                document.getElementById('login-btn').style.display = 'none';
                document.getElementById('register-btn').style.display = 'none';
                document.getElementById('logout-btn').style.display = 'inline-block';
                document.getElementById('mobile-login-btn').style.display = 'none';
                document.getElementById('mobile-register-btn').style.display = 'none';
                document.getElementById('mobile-logout-btn').style.display = 'flex';
                
                // Chuyển đến trang khảo sát
                showPage('survey');
                
                showToast('Đăng ký thành công! Hãy làm bài khảo sát để xác định trình độ.', 'success');
            } else {
                showToast('Vui lòng nhập đầy đủ thông tin.', 'error');
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            
            // Cập nhật giao diện
            document.getElementById('login-btn').style.display = 'inline-block';
            document.getElementById('register-btn').style.display = 'inline-block';
            document.getElementById('logout-btn').style.display = 'none';
            document.getElementById('mobile-login-btn').style.display = 'flex';
            document.getElementById('mobile-register-btn').style.display = 'flex';
            document.getElementById('mobile-logout-btn').style.display = 'none';
            
            // Chuyển đến trang chủ
            showPage('home');
            
            showToast('Đã đăng xuất.', 'success');
        }

        function pronounceWord(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                window.speechSynthesis.speak(utterance);
            } else {
                showToast('Trình duyệt của bạn không hỗ trợ phát âm.', 'error');
            }
        }

        function startSpeechRecognition() {
            document.getElementById('speaking-visualizer').style.display = 'flex';
            
            // Giả lập quá trình nhận dạng giọng nói
            setTimeout(() => {
                document.getElementById('speaking-visualizer').style.display = 'none';
                document.getElementById('speaking-result').innerHTML = `
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px;">
                        <h4 style="color: #2e7d32; margin-bottom: 10px;">Kết quả đánh giá</h4>
                        <p>Phát âm của bạn: <strong>Khá tốt</strong></p>
                        <p>Độ chính xác: <strong>85%</strong></p>
                        <p>Gợi ý cải thiện: Hãy chú ý đến âm cuối của từ.</p>
                    </div>
                `;
            }, 3000);
        }

        // NEW: Cải thiện hàm sendMessage với training AI tốt hơn
        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message) {
                const chatMessages = document.getElementById('chat-messages');
                
                // Thêm tin nhắn người dùng
                const userMessage = document.createElement('div');
                userMessage.className = 'message user-message';
                userMessage.textContent = message;
                chatMessages.appendChild(userMessage);
                
                // Xóa input
                input.value = '';
                
                // Hiển thị trạng thái đang gửi
                const typingIndicator = document.createElement('div');
                typingIndicator.className = 'message ai-message';
                typingIndicator.innerHTML = '<i>AI đang trả lời...</i>';
                chatMessages.appendChild(typingIndicator);
                
                // Cuộn xuống cuối
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                try {
                    // Tạo prompt được training tốt hơn dựa trên bài học hiện tại
                    let trainingPrompt = `Bạn là trợ lý AI cho ứng dụng học tiếng Anh Zlearn. `;
                    
                    if (currentLesson) {
                        trainingPrompt += `Hiện tại người dùng đang học bài: "${currentLesson.title}". `;
                        trainingPrompt += `Nội dung bài học: ${currentLesson.description}. `;
                        
                        if (currentLesson.grammar) {
                            trainingPrompt += `Điểm ngữ pháp chính: ${currentLesson.grammar}. `;
                        }
                        
                        if (currentLesson.vocabulary && currentLesson.vocabulary.length > 0) {
                            trainingPrompt += `Từ vựng trong bài: ${currentLesson.vocabulary.map(v => v.word).join(', ')}. `;
                        }
                    }
                    
                    trainingPrompt += `Hãy trả lời câu hỏi sau bằng tiếng Việt, tập trung vào chủ đề học tiếng Anh và liên quan đến nội dung bài học nếu có thể: ${message}`;
                    
                    // Gọi API Gemini
                    const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [
                                {
                                    parts: [
                                        {
                                            text: trainingPrompt
                                        }
                                    ]
                                }
                            ]
                        })
                    });
                    
                    const data = await response.json();
                    
                    // Xóa trạng thái đang gửi
                    chatMessages.removeChild(typingIndicator);
                    
                    // Thêm phản hồi từ AI
                    const aiMessage = document.createElement('div');
                    aiMessage.className = 'message ai-message';
                    
                    if (data.candidates && data.candidates[0].content.parts[0].text) {
                        aiMessage.textContent = data.candidates[0].content.parts[0].text;
                    } else {
                        aiMessage.textContent = "Xin lỗi, tôi không thể xử lý yêu cầu của bạn lúc này. Vui lòng thử lại sau.";
                    }
                    
                    chatMessages.appendChild(aiMessage);
                    
                    // Cuộn xuống cuối
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                } catch (error) {
                    console.error('Lỗi khi gọi API Gemini:', error);
                    
                    // Xóa trạng thái đang gửi
                    chatMessages.removeChild(typingIndicator);
                    
                    // Thêm phản hồi lỗi
                    const errorMessage = document.createElement('div');
                    errorMessage.className = 'message ai-message';
                    errorMessage.textContent = "Xin lỗi, đã xảy ra lỗi khi kết nối với AI. Vui lòng thử lại sau.";
                    chatMessages.appendChild(errorMessage);
                    
                    // Cuộn xuống cuối
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
            }
        }

        function adminLogin() {
            const email = document.getElementById('admin-email').value;
            const password = document.getElementById('admin-password').value;
            
            // Đơn giản hóa: cho phép đăng nhập với bất kỳ thông tin nào
            if (email && password) {
                showPage('admin-panel');
            } else {
                showToast('Vui lòng nhập thông tin đăng nhập.', 'error');
            }
        }

        function updateAdminPanel() {
            // Cập nhật danh sách người dùng
            const usersTable = document.getElementById('users-table');
            usersTable.innerHTML = '';
            
            sampleData.users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${getLevelName(user.level)}</td>
                    <td>${user.completedCourses}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit"><i class="fas fa-edit"></i></button>
                            <button class="btn-delete"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                `;
                usersTable.appendChild(row);
            });
            
            // Cập nhật danh sách khóa học
            const coursesTable = document.getElementById('courses-table');
            coursesTable.innerHTML = '';
            
            sampleData.courses.forEach(course => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${course.id}</td>
                    <td>${course.name}</td>
                    <td>${getLevelName(course.level)}</td>
                    <td>${course.lessons.length}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-edit"><i class="fas fa-edit"></i></button>
                            <button class="btn-delete"><i class="fas fa-trash"></i></button>
                        </div>
                    </td>
                `;
                coursesTable.appendChild(row);
            });
            
            // Cập nhật danh sách video
            const videosTable = document.getElementById('videos-table');
            videosTable.innerHTML = '';
            
            sampleData.courses.forEach(course => {
                course.lessons.forEach(lesson => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${lesson.id}</td>
                        <td>${lesson.title}</td>
                        <td>${course.name}</td>
                        <td>${lesson.videoUrl.substring(0, 30)}...</td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn-edit"><i class="fas fa-edit"></i></button>
                                <button class="btn-delete"><i class="fas fa-trash"></i></button>
                            </div>
                        </td>
                    `;
                    videosTable.appendChild(row);
                });
            });
            
            // Cập nhật danh sách tiến độ
            const progressTable = document.getElementById('progress-table');
            progressTable.innerHTML = '';
            
            sampleData.users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.name}</td>
                    <td>${getLevelName(user.level)}</td>
                    <td>${user.completedCourses}</td>
                    <td>${Math.floor(Math.random() * 30) + 70}/100</td>
                    <td>${Math.floor(Math.random() * 50) + 10} giờ</td>
                `;
                progressTable.appendChild(row);
            });
            
            // Cập nhật dropdown khóa học cho form thêm video
            const courseSelect = document.getElementById('video-course');
            courseSelect.innerHTML = '';
            
            sampleData.courses.forEach(course => {
                const option = document.createElement('option');
                option.value = course.id;
                option.textContent = course.name;
                courseSelect.appendChild(option);
            });
        }

        function changeAdminTab(tabName) {
            // Ẩn tất cả các tab
            document.querySelectorAll('.admin-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Bỏ active tất cả các tab
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Hiển thị tab được chọn
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // Đánh dấu tab được chọn
            document.querySelectorAll('.admin-tab').forEach(tab => {
                if (tab.textContent.toLowerCase().includes(tabName)) {
                    tab.classList.add('active');
                }
            });
        }

        function showAddCourseForm() {
            document.getElementById('add-course-form').style.display = 'block';
        }

        function hideAddCourseForm() {
            document.getElementById('add-course-form').style.display = 'none';
        }

        function addCourse() {
            const name = document.getElementById('course-name').value;
            const level = document.getElementById('course-level').value;
            const description = document.getElementById('course-description').value;
            
            if (name && level && description) {
                // Thêm khóa học mới (trong thực tế sẽ gửi request đến server)
                const newCourse = {
                    id: sampleData.courses.length + 1,
                    name: name,
                    level: level,
                    description: description,
                    lessons: []
                };
                
                sampleData.courses.push(newCourse);
                
                // Cập nhật giao diện
                updateAdminPanel();
                hideAddCourseForm();
                
                // Reset form
                document.getElementById('course-name').value = '';
                document.getElementById('course-description').value = '';
                
                showToast('Đã thêm khóa học mới thành công!', 'success');
            } else {
                showToast('Vui lòng nhập đầy đủ thông tin.', 'error');
            }
        }

        function showAddVideoForm() {
            document.getElementById('add-video-form').style.display = 'block';
        }

        function hideAddVideoForm() {
            document.getElementById('add-video-form').style.display = 'none';
        }

        function addVideo() {
            const title = document.getElementById('video-title').value;
            const courseId = parseInt(document.getElementById('video-course').value);
            const url = document.getElementById('video-url').value;
            const description = document.getElementById('video-description-admin').value;
            
            if (title && courseId && url && description) {
                // Thêm video mới (trong thực tế sẽ gửi request đến server)
                const course = sampleData.courses.find(c => c.id === courseId);
                if (course) {
                    const newVideo = {
                        id: course.lessons.length + 1,
                        title: title,
                        videoUrl: url,
                        description: description
                    };
                    
                    course.lessons.push(newVideo);
                    
                    // Cập nhật giao diện
                    updateAdminPanel();
                    hideAddVideoForm();
                    
                    // Reset form
                    document.getElementById('video-title').value = '';
                    document.getElementById('video-url').value = '';
                    document.getElementById('video-description-admin').value = '';
                    
                    showToast('Đã thêm video mới thành công!', 'success');
                }
            } else {
                showToast('Vui lòng nhập đầy đủ thông tin.', 'error');
            }
        }

        function getLevelName(level) {
            const levelNames = {
                'basic': 'Cơ bản',
                'elementary': 'Sơ cấp',
                'intermediate': 'Trung cấp',
                'advanced': 'Cao cấp',
                'proficient': 'Thành thạo'
            };
            
            return levelNames[level] || 'Chưa xác định';
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast ' + type;
            toast.classList.add('active');
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }

        // Theme Toggle
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('i');
        
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-theme');
            if (document.body.classList.contains('dark-theme')) {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            } else {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
        });

        // Mobile Menu
        const hamburger = document.getElementById('hamburger');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMenu = document.getElementById('close-menu');
        const overlay = document.getElementById('overlay');
        
        hamburger.addEventListener('click', () => {
            mobileMenu.classList.add('active');
            overlay.classList.add('active');
        });
        
        closeMenu.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            overlay.classList.remove('active');
        });
        
        overlay.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            overlay.classList.remove('active');
        });

        // Daily Quote
        const quotes = [
            "Học một ngôn ngữ là có thêm một linh hồn - Charlemagne",
            "Biết thêm một ngôn ngữ là sống thêm một cuộc đời - Ngạn ngữ Séc",
            "Không có gì là không thể với người biết cố gắng - Ngạn ngữ Anh",
            "Học tập là chìa khóa mở cánh cửa tương lai - Khuyết danh",
            "Thành công là tổng của những nỗ lực nhỏ được lặp lại hàng ngày - Robert Collier"
        ];
        
        document.getElementById('daily-quote').textContent = quotes[Math.floor(Math.random() * quotes.length)];

        // Modal Functions
        const modal = document.getElementById('modal');
        const closeModal = document.getElementById('close-modal');
        
        closeModal.addEventListener('click', () => {
            modal.classList.remove('active');
        });
        
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.remove('active');
            }
        });
        
        function showModal(title, content) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-body').innerHTML = content;
            modal.classList.add('active');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                
                // Update UI
                document.getElementById('login-btn').style.display = 'none';
                document.getElementById('register-btn').style.display = 'none';
                document.getElementById('logout-btn').style.display = 'inline-block';
                document.getElementById('mobile-login-btn').style.display = 'none';
                document.getElementById('mobile-register-btn').style.display = 'none';
                document.getElementById('mobile-logout-btn').style.display = 'flex';
            }
            
            // Initialize tooltips and other UI elements
            initializeDictionary();
        });
    </script>
</body>
</html>